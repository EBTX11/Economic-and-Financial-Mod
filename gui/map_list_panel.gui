# COPY-PASTED FOR NOW
@panel_width_minus_10 = 530			# used to be 450
@panel_width = 540  				# used to be 460
@panel_width_half = 270				# used to be 230
@panel_width_plus_10 = 550  		# used to be 470
@panel_width_plus_14 = 554			# used to be 474
@panel_width_plus_14_half = 277		# used to be 237
@panel_width_plus_20 = 560			# used to be 480
@panel_width_plus_30 = 570			# used to be 490
@panel_width_plus_70 = 610			# used to be 530

types map_list_panel_types {
	type map_list_panel_item = button {
		using = clean_button
		size = { @panel_width 40 }
		tooltip = "[MapListOption.GetTooltip]"
		using = tooltip_es
		block "interaction" {
			enabled = "[MapListOption.CanClick]"
			onclick = "[MapListOption.OnClick]"
			onrightclick = "[MapListOption.OnRightClick]"
			onmousehierarchyenter = "[MapListOption.OnMouseEnter]"
			onmousehierarchyleave = "[MapListOption.OnMouseLeave]"
		}

		icon = {
			using = highlighted_square_selection
			visible = "[MapListOption.IsMapTargetHighlighted]"
		}

		block "button_color" {

		}

		block "itemvisibility" {

		}

		state = {
			name = _mouse_enter
			on_start = "[PdxGuiWidget.FindChild('map_list_status').TriggerAnimation('map_list_status_mouse_enter')]"
			on_start = "[PdxGuiWidget.FindChild('map_list_status_bg').TriggerAnimation('map_list_status_mouse_enter')]"
		}
		state = {
			name = _mouse_leave
			on_start = "[PdxGuiWidget.FindChild('map_list_status').TriggerAnimation('map_list_status_mouse_leave')]"
			on_start = "[PdxGuiWidget.FindChild('map_list_status_bg').TriggerAnimation('map_list_status_mouse_leave')]"
		}
		state = {
			name = _mouse_press
			on_start = "[PdxGuiWidget.FindChild('map_list_status').TriggerAnimation('map_list_status_mouse_press')]"
			on_start = "[PdxGuiWidget.FindChild('map_list_status_bg').TriggerAnimation('map_list_status_mouse_press')]"
		}
		state = {
			name = _mouse_release
			on_start = "[PdxGuiWidget.FindChild('map_list_status').TriggerAnimation('map_list_status_mouse_release')]"
			on_start = "[PdxGuiWidget.FindChild('map_list_status_bg').TriggerAnimation('map_list_status_mouse_release')]"
		}

		icon = {
			name = "map_list_status_bg"
			texture = "gfx/interface/map_list/map_list_status_bg.dds"
			framesize = { 600 80 }
			size = { 300 40 }
			position = { -5 0 }
			alpha = 0.4
			frame = "[MapListOption.GetBackgroundStatusFrame]"

			alwaystransparent = yes

			state = {
				name = map_list_status_mouse_enter
				alpha = 0.8
				duration = 0.08
			}
			state = {
				name = map_list_status_mouse_press
				alpha = 0.8
				duration = 0.08
			}
			state = {
				name = map_list_status_mouse_release
				alpha = 0.8
				duration = 0.08
			}
			state = {
				name = map_list_status_mouse_leave
				alpha = 0.4
				duration = 0.12
			}
		}

		flowcontainer = {
			parentanchor = vcenter

			widget = {
				size = { 55 40 }
				visible = "[MapListOption.ShouldShowStatusIcon]"
				icon = {
					name = "map_list_status"
					texture = "gfx/interface/map_list/map_list_status_icons.dds"
					framesize = { 130 72 }
					size = { 65 36 }
					scale = 0.8
					alpha = 0.5
					parentanchor = center
					frame = "[MapListOption.GetIconStatusFrame]"

					alwaystransparent = yes

					state = {
						name = map_list_status_mouse_enter
						scale = 1
						alpha = 1
						duration = 0.08
					}
					state = {
						name = map_list_status_mouse_press
						scale = 1
						alpha = 1
						duration = 0.08
					}
					state = {
						name = map_list_status_mouse_release
						scale = 1
						alpha = 1
						duration = 0.08
					}
					state = {
						name = map_list_status_mouse_leave
						scale = 0.8
						alpha = 0.8
						duration = 0.12
					}
				}
			}

			block "values" {
				textbox = {
					margin = { 5 0 }
					size = { 475 25 }
					align = nobaseline
					text = "[MapListOption.GetTitle]"
					parentanchor = vcenter
					elide = right
				}
			}
		}
	}

	type map_list_panel_item_interaction = widget {
		size = { @panel_width 40 }

		block "itemvisibility" {}

		block "background" {
			icon = {
				name = "map_list_status_bg"
				texture = "gfx/interface/map_list/map_list_status_bg.dds"
				framesize = { 600 80 }
				size = { 600 40 }
				alpha = 0.8
				position = { -5 0 }
				frame = "[MapListOption.GetBackgroundStatusFrame]"
				parentanchor = vcenter

				alwaystransparent = yes
			}
		}

		state = {
			name = _mouse_enter
			on_start = "[PdxGuiWidget.FindChild('map_list_status_bg').TriggerAnimation('map_list_status_mouse_enter')]"
		}

		state = {
			name = _mouse_release
			on_start = "[PdxGuiWidget.FindChild('map_list_status_bg').TriggerAnimation('map_list_status_mouse_release')]"
		}


		flowcontainer = {
			datamodel_reuse_widgets = yes
			icon = {
				using = highlighted_square_selection
				visible = "[MapListOption.IsMapTargetHighlighted]"
			}

			button = {
				block "name_button_visibility" {
					visible = no
				}

				block "name_button_size" {
					size = { 140 40 }
				}

				using = default_button
				parentanchor = vcenter

				block "name_button_properties" {}

			}

			block "values" {
				textbox = {
					margin = { 5 5 }
					size = { 485 25 }
					align = nobaseline
					text = "[MapListOption.GetTitle]"
					parentanchor = vcenter
					elide = right
				}
			}

			button = {
				block "interaction_button_visibility" {}
				size = { 55 40 }
				using = default_button_action
				using = tooltip_es
				parentanchor = vcenter

				block "button_tooltip" {
					tooltip = "[MapListOption.GetTooltip]"
				}

				block "interaction" {
					enabled = "[MapListOption.CanClick]"
					onclick = "[MapListOption.OnClick]"
					onrightclick = "[MapListOption.OnRightClick]"
					onmousehierarchyenter = "[MapListOption.OnMouseEnter]"
					onmousehierarchyleave = "[MapListOption.OnMouseLeave]"
				}

				block "option_highlight" {}

				state = {
					name = _mouse_enter
					on_start = "[PdxGuiWidget.FindChild('map_list_status').TriggerAnimation('map_list_status_mouse_enter')]"
				}
				state = {
					name = _mouse_leave
					on_start = "[PdxGuiWidget.FindChild('map_list_status').TriggerAnimation('map_list_status_mouse_leave')]"
				}
				state = {
					name = _mouse_press
					on_start = "[PdxGuiWidget.FindChild('map_list_status').TriggerAnimation('map_list_status_mouse_press')]"
				}
				state = {
					name = _mouse_release
					on_start = "[PdxGuiWidget.FindChild('map_list_status').TriggerAnimation('map_list_status_mouse_release')]"
				}

				block "button_color" {}

				widget = {
					parentanchor = center
					size = { 35 35 }
					visible = "[MapListOption.ShouldShowStatusIcon]"
					icon = {
						name = "map_list_status"
						texture = "gfx/interface/map_list/map_list_status_icons.dds"
						framesize = { 130 72 }
						size = { 65 36 }
						scale = 0.7
						alpha = 0.8
						parentanchor = center
						frame = "[MapListOption.GetIconStatusFrame]"

						alwaystransparent = yes

						state = {
							name = map_list_status_mouse_enter
							scale = 0.9
							alpha = 1
							duration = 0.08
						}
						state = {
							name = map_list_status_mouse_press
							scale = 0.7
							alpha = 0.8
							duration = 0.08
						}
						state = {
							name = map_list_status_mouse_release
							scale = 0.9
							alpha = 1
							duration = 0.08
						}
						state = {
							name = map_list_status_mouse_leave
							scale = 0.7
							alpha = 0.8
							duration = 0.12
						}
					}
				}
			}
		}

		block "whole_widget_highlight" {}
	}

	### MAP LIST WINDOW
	type map_list_panel = widget {
		using = sidepanel_plus_sidebar_size
		layoutpolicy_vertical = expanding
		alwaystransparent = no
		using = clickthrough_blocker
		layer = layer_ingame_menu
		datamodel_reuse_widgets = yes

		state = {
			name = _show
			start_sound = {
				soundeffect = "event:/SFX/UI/SideBar/country"
			}
		}
		state = {
			name = _hide

		}

		using = sidepanel_filler_bg

		vbox = {
			using = sidebar_margin
			layoutpolicy_vertical = expanding
			layoutpolicy_horizontal = expanding

			background = {
				using = default_background
				margin = { 3 0 }
				margin_top = -9
				margin_bottom = 30
				margin_left = -50
			}

			widget = { size = { 10 20 }}

			widget = {
				name = "header"
				size = { 0 50 }
				layoutpolicy_horizontal = expanding

				background = {
					using = default_header_bg
					margin = { 0 2 }
				}

				textbox = {
					size = { @panel_width 50 }
					margin = { 40 0 }
					using = header_font
					using = fontsize_xl
					fontsize_min = 17
					elide = right
					text = "MAP_LIST_PANEL_TITLE"
					parentanchor = center
					align = hcenter|nobaseline
					default_format = "#header"
				}

				back_button_large = {
					position = { 2 0 }
					parentanchor = left|vcenter
					block "header_back_button" {
						onclick = "[MapListPanelManager.CloseCurrentPanel]"
						onclick = "[MapListPanelManager.ResetActiveMapInteraction]"
						input_action = "back"
					}
				}

				close_button_large = {
					position = { -2 0 }
					parentanchor = right|vcenter
					block "header_close_button" {
						onclick = "[MapListPanelManager.CloseCurrentPanel]"
						onclick = "[MapListPanelManager.ResetActiveMapInteraction]"
					}
					shortcut = "close_window"
				}
			}

			flowcontainer = {
				margin = { 10 10 }
				visible = "[Not(StringIsEmpty(MapListPanel.GetTitle))]"

				flowcontainer = {
					direction = vertical

					textbox = {
						text = "[MapListPanel.GetTitle]"
						parentanchor = hcenter
						maximumsize = { 540 -1 }
						align = hcenter|nobaseline
						using = fontsize_large
						multiline = yes
						autoresize = yes
					}
				}
			}

			flowcontainer = {
				margin_top = 5
	
				### DROPDOWN
				dropDown = {
					visible = "[StringIsEmpty(MapListPanel.GetTitle)]"
					datamodel = "[GetMapModeIndices]"
					onselectionchanged = "[SetLockedMapMode]"
					selectedindex = "[GetSelectedMapMode]"
					size = { @panel_width 35 }
					focuspolicy = all
					alwaystransparent = no

					active_item = {
						button = {
							using = expand_button_bg_right_fade
							size = { 100% 100% }
							button_trigger = none

							hbox = {
								margin_left = 10

								button = {
									size = { 15 15 }
									using = expand_arrow_expanded
									mirror = vertical
									alwaystransparent = yes
								}

								textbox = {
									margin_left = 5
									layoutpolicy_horizontal = expanding
									size = { 0 25 }
									fontsize_min = 12
									elide = right
									text = "[GetSelectedMapModeName]"
									align = nobaseline
								}
							}
						}
					}

					item = {
						widget = {
							button = {
								size = { 95% 100% }
								using = clean_button
								parentanchor = hcenter

								button_trigger = none

								textbox = {
									autoresize = yes
									text = "[GetMapModeName( int32.GetInt )]"
									align = nobaseline
									parentanchor = vcenter
									margin_left = 10
								}
							}
						}
					}

					list = {
						scrollarea = {
							widgetanchor = top|left
							parentanchor = top|left
							position = { 0 35 }
							maximumsize = { -1 800 }
							autoresizescrollarea = yes
							alwaystransparent = yes
							scrollbarpolicy_horizontal = always_off

							background = {
								using = default_background
								margin = { 6 8 }
							}

							scrollwidget = {
								fixedgridbox = {
									alwaystransparent = no
									setitemsizefromcell = yes
									addcolumn = 350
									addrow = 30
								}
							}

							scrollbar_vertical = {
								using = vertical_scrollbar
							}

							scrollbar_horizontal = {
								using = horizontal_scrollbar
							}
						}
					}
				}
			}

			### sort buttons
			flowcontainer = {
				direction = horizontal
				margin = { 0 5 }

				block "headers" {
					sort_button = {
						align = hcenter|nobaseline
						text = "DEFAULT_MAP_LIST_PANEL_TITLE_HEADER"
						tooltip = "DEFAULT_MAP_LIST_PANEL_TITLE_HEADER_TOOLTIP"
						size = { 485 20 }
						onclick = "[MapListPanel.Sort('title')]"
					}

					sort_button = {
						align = hcenter|nobaseline
						tooltip = "DEFAULT_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
						size = { 55 20 }
						onclick = "[MapListPanel.Sort('status')]"
						icon = {
							texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
							size = { 25 25 }
							parentanchor = center
							alwaystransparent = yes
						}
					}
				}
			}

			### list with content
			scrollarea = {
				layoutpolicy_vertical = expanding
				layoutpolicy_horizontal = expanding
				scrollbarpolicy_horizontal = always_off

				scrollbar_vertical = {
					using = vertical_scrollbar
				}

				scrollwidget = {
					flowcontainer = {
						using = default_list_position
						direction = vertical

						block "scrollarea_content" {
							flowcontainer = {
								onmousehierarchyenter = "[SetCanOpenRightClickContextMenu( Not(MapListPanelManager.HasCurrentInteraction) )]"
								onmousehierarchyleave = "[SetCanOpenRightClickContextMenu( '(bool)yes' )]"
								parentanchor = hcenter
								direction = vertical
								datamodel = "[MapListPanel.AccessValidOptions]"
								datamodel_reuse_widgets = yes

								block "scrollarea_spacing" {}

								block "item" {
									block "item" {
										item = {
											map_list_panel_item = {}
										}
									}
								}

								block "empty_state" {
									empty_state = {
										blockoverride "visible" {
											visible = "[IsDataModelEmpty(MapListPanel.AccessValidOptions)]"
										}
										blockoverride "text" {
											text = "MAP_LIST_NO_AVAILABLE_OPTIONS"
										}
									}
								}
							}

							widget = { 
								size = { 10 10 }
							}

							section_header_button = {
								visible = "[GreaterThan_int32(GetDataModelSize(MapListPanel.AccessFailedOptions), '(int32)0')]"
								blockoverride "left_text" {
									text = "FAILED_OPTIONS"
								}

								blockoverride "onclick" {
									onclick = "[MapListPanelManager.ToggleFailedOptions]"
								}

								blockoverride "onclick_showmore" {
									visible = "[Not(MapListPanelManager.IsShowingFailedOptions)]"
								}

								blockoverride "onclick_showless" {
									visible = "[MapListPanelManager.IsShowingFailedOptions]"
								}
							}

							flowcontainer = {
								direction = vertical
								parentanchor = hcenter
								visible = "[And( MapListPanelManager.IsShowingFailedOptions, Not(IsDataModelEmpty(MapListPanel.AccessFailedOptions)))]"

								datamodel = "[MapListPanel.AccessFailedOptions]"

								block "item" {
									item = {
										map_list_panel_item = {}
									}
								}
							}

							section_header_button = {
								visible = "[GreaterThan_int32(GetDataModelSize(MapListPanel.AccessInvalidOptions), '(int32)0')]"
								blockoverride "left_text" {
									text = "INVALID_OPTIONS"
								}

								blockoverride "onclick" {
									onclick = "[MapListPanelManager.ToggleInvalidOptions]"
								}

								blockoverride "onclick_showmore" {
									visible = "[Not(MapListPanelManager.IsShowingInvalidOptions)]"
								}

								blockoverride "onclick_showless" {
									visible = "[MapListPanelManager.IsShowingInvalidOptions]"
								}
							}

							flowcontainer = {
								direction = vertical
								parentanchor = hcenter
								visible = "[And( MapListPanelManager.IsShowingInvalidOptions, Not(IsDataModelEmpty(MapListPanel.AccessInvalidOptions)))]"

								datamodel = "[MapListPanel.AccessInvalidOptions]"

								block "item" {
									item = {
										map_list_panel_item = {}
									}
								}
							}

							widget = { 
								size = { 10 10 }
							}
						}
					}
				}
			}
		}
	}

	type country_map_list_one_value = map_list_panel {
		# name = "countries_map_list_panel"

		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "headers" {
			sort_button = {
				size = { 55 40 }
				onclick = "[MapListPanel.Sort('rank')]"

				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_rank.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}

				tooltip = "SORT_BY_RANK"

				blockoverride "selected_visibility" {
					visible = no
				}
			}
			sort_button = {
				align = nobaseline
				text = "COUNTRY"
				size = { 295 20 }
				onclick = "[MapListPanel.Sort('name')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 190 20 }
				block "shown_on_map_header" {
					text = "concept_prestige"
					tooltip = "PRESTIGE"
					onclick = "[MapListPanel.Sort('prestige')]"
				}
			}
		}

		blockoverride "values" {
			widget = {
				size = { 50 40 }
				parentanchor = left|vcenter
				alwaystransparent = no
				tooltip = "[Country.GetRankTooltip]"

				rank_badge = {
					size = { 50 50 }
					parentanchor = right|vcenter
					position = { -2 0 }
					
					blockoverride "datacontext " {
						datacontext = "[MapListOption.GetCountryData.GetCountry]" 
					}

					blockoverride "rank_text" {
						raw_text = "#BOLD [Country.GetCountryScorePositionDesc]"
					}
					blockoverride "rank_text_2" {
						raw_text = "#BOLD [Country.GetCountryScorePositionDesc]"
						visible = no
					}
				}
			}
			
			textbox = {
				margin = { 5 0 }
				size = { 295 25 }
				align = nobaseline
				text = "[MapListOption.GetCountryData.GetCountry.GetName]"
				parentanchor = vcenter
				elide = right
			}

			textbox = {
				datacontext = "[MapListOption.GetCountryData.GetCountry]"
				margin = { 5 0 }
				size = { 180 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				block "shown_on_map_value" {
					text = "[Country.GetPrestige|1v]"
					tooltip = "[Country.GetRankTooltip]"
				}
			}
		}

		blockoverride "interaction" {
			datacontext = "[MapListOption.GetCountryData.GetCountry]"
			onclick = "[InformationPanelBar.OpenCountryPanel(Country.Self)]"
			onrightclick = "[RightClickMenuManager.ShowForCountry(Country.AccessSelf)]"
			onmousehierarchyenter = "[AccessHighlightManager.HighlightCountry(Country.Self)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
		}
	}

	### COUNTRIES
	type countries_map_list_panel_full = map_list_panel {

		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "button_color" {
			color = "[Country.GetDiplomaticStatusColor( GetPlayer.Self )]"
		}

		blockoverride "headers" {
			sort_button = {
				size = { 55 40 }
				onclick = "[MapListPanel.Sort('rank')]"

				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_rank.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}

				tooltip = "SORT_BY_RANK"

				blockoverride "selected_visibility" {
					visible = no
				}
			}

			sort_button = {
				align = nobaseline
				text = "concept_country"
				size = { 150 20 }
				onclick = "[MapListPanel.Sort('name')]"

				blockoverride "selected_visibility" {
					visible = no
				}
			}

			sort_button = {
				align = hcenter|nobaseline
				size = { 80 20 }
				text = "concept_prestige"
				onclick = "[MapListPanel.Sort('prestige')]"

				blockoverride "selected_visibility" {
					visible = no
				}
			}

			sort_button = {
				align = hcenter|nobaseline
				size = { 80 20 }
				text = "concept_gdp_short"
				onclick = "[MapListPanel.Sort('gdp')]"

				blockoverride "selected_visibility" {
					visible = no
				}
			}

			sort_button = {
				align = hcenter|nobaseline
				size = { 70 20 }
				text = "SOL_SHORT_TEXT"
				onclick = "[MapListPanel.Sort('sol')]"

				blockoverride "selected_visibility" {
					visible = no
				}
			}

			sort_button = {
				align = hcenter|nobaseline
				size = { 105 20 }
				text = "concept_population"
				onclick = "[MapListPanel.Sort('population')]"

				blockoverride "selected_visibility" {
					visible = no
				}
			}
		}

		blockoverride "values" {
			datacontext = "[MapListOption.GetCountryData.GetCountry]"
			widget = {
				size = { 50 40 }
				parentanchor = left|vcenter
				alwaystransparent = no
				tooltip = "[Country.GetRankTooltip]"

				rank_badge = {
					size = { 50 50 }
					parentanchor = right|vcenter
					position = { -2 0 }
					
					blockoverride "datacontext " {
						datacontext = "[MapListOption.GetCountryData.GetCountry]" 
					}

					blockoverride "rank_text" {
						raw_text = "#BOLD [Country.GetCountryScorePositionDesc]"
					}
					blockoverride "rank_text_2" {
						raw_text = "#BOLD [Country.GetCountryScorePositionDesc]"
						visible = no
					}
				}
			}

			textbox = {
				margin = { 5 0 }
				size = { 150 25 }
				align = nobaseline
				text = "[Country.GetName]"
				parentanchor = vcenter
				elide = right
			}

			textbox = {
				margin = { 5 0 }
				size = { 80 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				text = "[Country.GetPrestige|1v]"
				tooltip = "[Country.GetRankTooltip]"
				alpha = "[TransparentIfZero_int32(Country.GetPrestige)]"
			}
			textbox = {
				margin = { 5 0 }
				size = { 80 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				using = GDP_tooltip_with_graph
				raw_text = "#variable [Country.GetGDP|1*]#!"
			}
			textbox = {
				margin = { 5 0 }
				size = { 70 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				using = average_standard_of_living_tooltip_with_graph
				text = "[Country.GetAverageSoLByPopulation|v1]"
			}
			textbox = {
				margin = { 5 0 }
				size = { 100 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				using = population_tooltip_with_graph
				raw_text = "#variable [Country.GetTotalPopulation|D]#!"
			}
		}

		blockoverride "interaction" {
			datacontext = "[MapListOption.GetCountryData.GetCountry]"
			onclick = "[InformationPanelBar.OpenCountryPanel(Country.Self)]"
			onrightclick = "[RightClickMenuManager.ShowForCountry(Country.AccessSelf)]"
			onmousehierarchyenter = "[AccessHighlightManager.HighlightCountry(Country.Self)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
		}
	}

	type state_map_list_one_value = map_list_panel {
		# name = "states_map_list_panel"

		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "headers" {
			sort_button = {
				align = nobaseline
				text = "STATE"
				size = { 355 20 }
				onclick = "[MapListPanel.Sort('name')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 185 20 }
				block "shown_on_map_header" {
					raw_text = "A Value type"
					raw_tooltip = "A tooltip"
					#onclick = "[MapListPanel.Sort('something')]"
				}
			}
		}

		blockoverride "values" {
			textbox = {
				margin = { 5 0 }
				size = { 350 25 }
				align = nobaseline
				text = "[MapListOption.GetStateData.GetState.GetOwner.GetFlagTextIcon]  [MapListOption.GetStateData.GetState.GetName]"
				parentanchor = vcenter
				elide = right
			}

			textbox = {
				datacontext = "[MapListOption.GetStateData.GetState]"
				margin = { 5 0 }
				size = { 180 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				block "shown_on_map_value" {
					raw_text = "#todo A Value#!"
					raw_tooltip = "#todo A tooltip#!"
				}
			}
		}

		blockoverride "interaction" {
			datacontext = "[MapListOption.AccessStateData.AccessState]"
			onclick = "[InformationPanelBar.OpenStatePanel(State.AccessSelf)]"
			onrightclick = "[RightClickMenuManager.ShowForState(State.AccessSelf)]"
			onmousehierarchyenter = "[AccessHighlightManager.HighlightState(State.Self)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
		}
	}

	type empty_map_list_panel = map_list_panel {
		name = "empty_map_list_panel"

		blockoverride "title" {
			text = "No active interaction."
		}

		blockoverride "headers" {
		}

		blockoverride "scrollarea_content" {
		}
	}

	type default_map_list_panel = map_list_panel {
		name = "default_map_list_panel"

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {}
			}
		}
	}

	### BUILD BUILDINGS IS IN A SEPARATE FILE FOR 1.6 TO AVOID MERGE CONFLICTS (map_list_panel_one_point_six.gui)

	type build_building_map_list_panel = map_list_panel {
		name = "build_building_map_list_panel"
		datamodel_reuse_widgets = yes

		blockoverride "headers" {
			direction = vertical

			construction_filters = {}
			construction_headers_condensed = {
				visible = "[Not(GetVariableSystem.Exists('construction_list_toggle_full_or_condensed'))]"
			}
			construction_headers_full = {
				visible = "[GetVariableSystem.Exists('construction_list_toggle_full_or_condensed')]"
			}
		}

		blockoverride "item" {
			item = {
				container = {
					min_width = @panel_width

					construction_interaction_item_condensed = {
						visible = "[Not(GetVariableSystem.Exists('construction_list_toggle_full_or_condensed'))]"
					}

					construction_interaction_item_full = {
						visible = "[GetVariableSystem.Exists('construction_list_toggle_full_or_condensed')]"
					}
				}
			}
		}
	}

	type construction_interaction_item_condensed = map_list_panel_item_interaction {
		blockoverride "name_button_visibility" {
			visible = yes
		}

		blockoverride "name_button_size" {
			size = { 120 40 }
		}

		blockoverride "name_button_properties" {

			datacontext = "[MapListOption.GetBuildingData.GetState]"

			onmousehierarchyenter = "[AccessHighlightManager.HighlightState(State.Self)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"

			datacontext = "[MapListOption.GetBuildingData.GetBuilding]"
			onclick = "[InformationPanelBar.OpenBuildingDetailsPanel(Building.AccessSelf)]"
			enabled = "[Building.IsValid]"
			onrightclick = "[RightClickMenuManager.ShowForBuilding(Building.AccessSelf)]"

			tooltipwidget = {
				FancyTooltip_Building = {}
			}

			hbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding

				margin = {10 0}
				spacing = 5

				textbox = {
					visible = "[Not(State.GetOwner.IsLocalPlayer)]"
					text = "[State.GetOwner.GetFlagTextIcon]"

					autoresize = yes
					align = nobaseline
					layoutpolicy_vertical = expanding					
				}

				textbox = {
					text = "[State.GetNameNoFormatting]"

					layoutpolicy_horizontal = expanding
					align = nobaseline
					elide = right
					fontsize_min = 12
				}

				icon = {
					visible = "[And(State.IsUnincorporated, Not(State.IsIncorporating))]"
					size = { 25 25 }
					texture = "gfx/interface/icons/state_status_icons/unincorporated_state.dds"
				}
			}		
			
		}

		blockoverride "values" {

			textbox = {
				datacontext = "[MapListOption.GetBuildingData.GetBuilding]"
				margin = { 5 0 }
				size = { 70 25 }
				align = right|nobaseline
				text = "BUILDING_SIZE"
				using = building_size_tooltip_with_ownership
				parentanchor = vcenter
				elide = right
				using = tooltip_above
				alpha = "[TransparentIfFalse( Or( GreaterThan_int32(Building.GetExpansionLevel, '(int32)0'), Building.HasConstructionQueued ))]"
				fontsize_min = 12
			}

			textbox = {
				margin = { 5 0 }
				margin_right = 5
				size = { 60 25 }
				align = right|nobaseline
				datacontext = "[MapListOption.GetBuildingData.GetState]"
				raw_text = "#v [State.GetInfrastructureBalance|0+=]#!"
				tooltip = "STATE_INFRASTRUCTURE_DESC"
				parentanchor = vcenter
				elide = right
				visible = "[Not(MapListOption.GetBuildingData.GetBuilding.GetBuildingType.IsMilitaryBuilding)]"
			}

			widget = {
				size = { 105 25 }
				visible = "[MapListOption.GetBuildingData.GetBuilding.GetBuildingType.IsMilitaryBuilding]"
				parentanchor = vcenter
				textbox = {
					margin = { 5 0 }
					size = { 105 25 }
					align = right|nobaseline
					datacontext = "[MapListOption.AccessBuildingData.AccessBuilding]"
					datacontext = "[MapListOption.AccessBuildingData.GetMilitaryFormation]"
					text = "UNITS_PROVIDED_FROM_BUILDING"
					tooltip = "UNITS_PROVIDED_FROM_BUILDING_TOOLTIP"
					parentanchor = vcenter
					elide = right
					visible = "[NotZero(Building.GetExpansionLevel)]"
					alpha = "[TransparentIfZero_int32(Building.GetNumCombatUnitsProvidedToFormation(MilitaryFormation.Self))]"
				}

				textbox = {
					margin = { 5 0 }
					size = { 105 25 }
					align = right|nobaseline
					datacontext = "[MapListOption.AccessBuildingData.AccessBuilding]"
					datacontext = "[MapListOption.AccessBuildingData.GetMilitaryFormation]"
					text = "NOT_AVAILABLE"
					parentanchor = vcenter
					elide = right
					visible = "[IsZero(Building.GetExpansionLevel)]"
					alpha = "[TransparentIfTrue('(bool)yes')]"
				}
			}

			### SETTING - JOBSEEKERS
			textbox = {
				datacontext = "[MapListOption.GetBuildingData.GetState]"
				margin = { 5 0 }
				size = { 85 25 }
				align = right|nobaseline
				text = "MAP_LIST_STATE_AVAILABLE_LABOR"
				parentanchor = vcenter
				elide = right
				tooltip = "STATE_AVAILABLE_LABOR_TOOLTIP"
				visible = "[Not(GetVariableSystem.HasValue('hide_jobseekers', 'true'))]"
			}

			### SETTING - PEASANTS
			textbox = {
				datacontext = "[MapListOption.GetBuildingData.GetState]"
				margin = { 5 0 }
				size = { 85 25 }
				align = right|nobaseline
				text = "[State.GetNumSubsistenceWorkingAdults|Dv] [SelectLocalization(State.HasInsufficientQualificationsForAvailablePositions, '@red_cross!', '@green_checkmark!')]"
				parentanchor = vcenter
				elide = right
				tooltip = "STATE_AVAILABLE_LABOR_TOOLTIP"
				visible = "[GetVariableSystem.HasValue('show_peasants', 'true')]"
			}

			### SETTING - UNEMPLOYED
			textbox = {
				datacontext = "[MapListOption.GetBuildingData.GetState]"
				margin = { 5 0 }
				size = { 85 25 }
				align = right|nobaseline
				raw_text = "#variable [State.GetNumUnemployedWorkingAdults|D]#! [SelectLocalization(State.HasInsufficientQualificationsForAvailablePositions, '@red_cross!', '@green_checkmark!')]"
				parentanchor = vcenter
				elide = right
				tooltip = "STATE_AVAILABLE_LABOR_TOOLTIP"
				visible = "[GetVariableSystem.HasValue('show_unemployed', 'true')]"
			}

			flowcontainer = {
				visible = "[Not(MapListOption.GetBuildingData.GetBuilding.GetBuildingType.IsMilitaryBuilding)]"
				parentanchor = vcenter

				productivity_or_other_information = {
					blockoverride "productivity_info_datacontext" {
						datacontext = "[MapListOption.GetBuildingData.GetBuilding]"
						datacontext = "[Building.GetState]"
					}

					blockoverride "productivity_info_text_style" {
						size = { 70 25 }
						margin = { 5 0 }
						margin_right = 10
						align = right|nobaseline
						parentanchor = vcenter
					}
				}

				textbox = {
					margin = { 5 0 }
					margin_right = 10
					size = { 80 25 }
					align = right|nobaseline
					datacontext = "[MapListOption.GetBuildingData.GetBuilding]"
					raw_text = "#v [Building.GetBuildingType.GetExpansionRevenueImpact(Building.Self, Building.GetState)|K+=]#!"
					tooltip = "[Building.GetBuildingType.GetExpansionRevenueImpactDesc(Building.Self, Building.GetState)]"
					parentanchor = vcenter
					elide = right
				}
			}

			textbox = {
				margin = { 5 0 }
				margin_right = 5
				size = { 105 25 }
				align = right|nobaseline
				datacontext = "[MapListOption.GetBuildingData.GetBuilding]"
				raw_text = "#v [Building.GetState.GetStateRegion.GetStrategicRegion.GetName]#!"
				parentanchor = vcenter
				elide = right
				visible = "[MapListOption.GetBuildingData.GetBuilding.GetBuildingType.IsMilitaryBuilding]"
			}
		}
	}

	type construction_interaction_item_full = flowcontainer {
		margin_bottom = 10
		
		direction = vertical

		background = {
			using = entry_bg_simple
			margin_bottom = -5		# Workaround to separate spacing between items in build_building_map_list_panel. (We don't want the spacing for construction_interaction_item_condensed).
		}

		datacontext = "[MapListOption.AccessBuildingData.AccessState]"
		datacontext = "[MapListOption.AccessBuildingData.AccessBuilding]"
		datacontext = "[MapListOption.AccessBuildingData.GetMilitaryFormation]"
		datacontext = "[MapListOption.AccessBuildingData.GetCombatUnitType]"

		onmousehierarchyenter = "[AccessHighlightManager.HighlightState(State.Self)]"
		onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
		onmousehierarchyenter = "[PdxGuiWidget.FindChild('building_goto').InterruptThenTriggerAnimation('hide_building_goto','show_building_goto')]"
		onmousehierarchyleave = "[PdxGuiWidget.FindChild('building_goto').InterruptThenTriggerAnimation('show_building_goto','hide_building_goto')]"
		alwaystransparent = no

		onmousehierarchyenter = "[MapListOption.OnMouseEnter]"
		onmousehierarchyleave = "[MapListOption.OnMouseLeave]"


		tooltipwidget = {
			FancyTooltip_Building = {}
		}

		icon = {
			using = highlighted_square_selection
			visible = "[MapListOption.IsMapTargetHighlighted]"
		}

		widget = {
			size = { @panel_width 40 }

			block "background" {
				background = {
					name = "map_list_status_bg"
					texture = "gfx/interface/map_list/map_list_status_bg.dds"
					framesize = { 600 80 }
					size = { 600 40 }
					alpha = "[TransparentIfFalse(Building.IsActive)]"
					position = { -5 0 }
					frame = "[MapListOption.GetBackgroundStatusFrame]"
					parentanchor = vcenter
					alwaystransparent = yes
				}
			}

			hbox = {
				spacing = 5
				margin_right = 5
				
				textbox = {
					text = "[Building.GetState.GetName]"
					autoresize = yes
					align = nobaseline
					margin_left = 10
					margin_right = 2
				}

				button_icon_goto = {
					name = building_goto
					visible = "[Building.IsValid]"
					alpha = 0

					size = { 25 25 }

					state = {
						name = show_building_goto
						delay = 0.15
						alpha = 1
						duration = 0.15
						using = Animation_Curve_Default
					}

					state = {
						name = hide_building_goto
						alpha = 0
						duration = 0
						using = Animation_Curve_Default
					}

					onclick = "[InformationPanelBar.OpenBuildingDetailsPanel(Building.AccessSelf)]"
					tooltip = "GO_TO_BUTTON_BUILDING"
				}

				widget = {
					layoutpolicy_horizontal = expanding
				}

				### ACTION BUTTONS

				### TIMED MODIFIERS
				hbox = {
					margin = { 5 0 }
					visible = "[Not(IsDataModelEmpty(Building.GetTimedModifiers))]"

					datamodel = "[Building.GetTimedModifiers]"
					spacing = 5

					item = {
						icon = {
							tooltip = "[TimedModifier.GetTooltip]"
							texture = "[TimedModifier.GetIcon]"
							size = { 30 30 }
						}
					}
				}

				hbox = {
					visible = "[Not(IsDataModelEmpty(State.AccessStateRegion.AccessTraits))]"
					datamodel = "[State.AccessStateRegion.AccessTraits]"
					spacing = 5
					righttoleft = yes

					item = {
						icon = {
							size = { 30 30 }
							tooltip = TOOLTIP_STATE_TRAIT
							onmousehierarchyenter = "[AccessHighlightManager.HighlightStateTrait(StateTrait.Self)]"
							onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
							alwaystransparent = no
							texture = "[StateTrait.GetTexture]"
						}
					}
				}
				
				icon = {
					visible = "[And(State.IsUnincorporated, Not(State.IsIncorporating))]"
					size = { 30 30 }
					texture = "gfx/interface/icons/state_status_icons/unincorporated_state.dds"
				}

				building_level_controls_with_military = {
					minimumsize = { 184 30 }

					blockoverride "controller_size" {
						size = { 184 30 }
					}

					blockoverride "button_size" {
						size = { 30 30 }
					}

					blockoverride "downsize_button_visibility" {
						visible = "[And( IsValid( Building.Downsize ), Not( ShouldAskConfirmation( Building.Downsize ) ) )]"
					}

					blockoverride "downsize_with_confirmation_button_visibility" {
						visible = "[And( IsValid( Building.Downsize ), ShouldAskConfirmation( Building.Downsize ) )]"
					}

					blockoverride "cancel_button_visibility" {
						visible = "[IsValid(Building.CancelConstruction)]"
					}

					blockoverride "building_size_small_ownership_chart"
					{
						#no space for the building ownership chart
					}
				}
			}
		}

		widget = {
			size = { 535 40 }

			alpha = "[TransparentIfFalse(Building.IsActive)]"

			state = {
				name = _mouse_enter
				on_start = "[PdxGuiWidget.FindChild('map_list_status_bg').TriggerAnimation('map_list_status_mouse_enter')]"
			}

			state = {
				name = _mouse_release
				on_start = "[PdxGuiWidget.FindChild('map_list_status_bg').TriggerAnimation('map_list_status_mouse_release')]"
			}

			hbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				spacing = 10
				margin_top = 5
				margin_bottom = 5

				# Country flag
				margin_widget = {
					min_width = 35
					margin_left = 14

					tiny_flag = {
						datacontext = "[State.GetOwner]"
						parentanchor = vcenter
					}
				}

				# Infrastructure Balance
				textbox = {
					visible = "[Not(MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding)]"

					layoutpolicy_horizontal = expanding
					layoutstretchfactor_horizontal = 1
					margin_right = 5
					align = right|nobaseline

					datacontext = "[MapListOption.GetBuildingData.GetState]"
					raw_text = "#v [State.GetInfrastructureBalance|0+=]#!"
					tooltip = "STATE_INFRASTRUCTURE_DESC"
					elide = right
				}

				box_vertical_divider = {
					visible = "[Not(MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding)]"
				}

				### SETTING - JOBSEEKERS
				textbox = {
					visible = "[Not(GetVariableSystem.HasValue('hide_jobseekers', 'true'))]"

					layoutpolicy_horizontal = expanding
					layoutstretchfactor_horizontal = 1
					min_width = 85

					datacontext = "[MapListOption.GetBuildingData.GetState]"
					align = right|nobaseline
					text = "MAP_LIST_STATE_AVAILABLE_LABOR"
					elide = right
					tooltip = "STATE_AVAILABLE_LABOR_TOOLTIP"
				}

				### SETTING - PEASANTS
				textbox = {
					visible = "[GetVariableSystem.HasValue('show_peasants', 'true')]"

					layoutpolicy_horizontal = expanding
					layoutstretchfactor_horizontal = 1
					min_width = 85

					datacontext = "[MapListOption.GetBuildingData.GetState]"
					align = right|nobaseline
					text = "[State.GetNumSubsistenceWorkingAdults|Dv] [SelectLocalization(State.HasInsufficientQualificationsForAvailablePositions, '@red_cross!', '@green_checkmark!')]"
					elide = right
					tooltip = "STATE_AVAILABLE_LABOR_TOOLTIP"
				}

				### SETTING - UNEMPLOYED
				textbox = {
					visible = "[GetVariableSystem.HasValue('show_unemployed', 'true')]"

					layoutpolicy_horizontal = expanding
					layoutstretchfactor_horizontal = 1
					min_width = 85

					datacontext = "[MapListOption.GetBuildingData.GetState]"
					align = right|nobaseline
					raw_text = "#variable [State.GetNumUnemployedWorkingAdults|D]#! [SelectLocalization(State.HasInsufficientQualificationsForAvailablePositions, '@red_cross!', '@green_checkmark!')]"
					elide = right
					tooltip = "STATE_AVAILABLE_LABOR_TOOLTIP"
				}

				box_vertical_divider = {}

				hbox = {
					size = { 140 25 }
					visible = "[Not(MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding)]"
					
					productivity_or_other_information = {
						blockoverride "productivity_info_datacontext" {
							datacontext = "[MapListOption.GetBuildingData.GetBuilding]"
							datacontext = "[Building.GetState]"
						}

						blockoverride "productivity_info_text_style" {
							size = { 65 25 }
							margin_right = 10
							align = right|nobaseline
							parentanchor = vcenter
						}
					}

					widget = {
						layoutpolicy_horizontal = preferred
						layoutpolicy_vertical = expanding
						vertical_divider = {}
					}

					textbox = {
						margin_right = 10
						size = { 80 25 }
						align = right|nobaseline
						datacontext = "[MapListOption.GetBuildingData.GetBuilding]"
						raw_text = "#v [Building.GetBuildingType.GetExpansionRevenueImpact(Building.Self, Building.GetState)|K+=]#!"
						tooltip = "[Building.GetBuildingType.GetExpansionRevenueImpactDesc(Building.Self, Building.GetState)]"
						elide = right
					}
				}

				box_vertical_divider = {
					visible = "[Not(MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding)]"
				}

				# Military units provided text
				textbox = {
					visible = "[And(MapListOption.GetBuildingData.GetBuilding.GetBuildingType.IsMilitaryBuilding, NotZero(Building.GetExpansionLevel))]"
					
					min_width = 85
					align = right|nobaseline

					datacontext = "[MapListOption.AccessBuildingData.AccessBuilding]"
					datacontext = "[MapListOption.AccessBuildingData.GetMilitaryFormation]"
					text = "UNITS_PROVIDED_FROM_BUILDING"
					tooltip = "UNITS_PROVIDED_FROM_BUILDING_TOOLTIP"
					elide = right
					alpha = "[TransparentIfZero_int32(Building.GetNumCombatUnitsProvidedToFormation(MilitaryFormation.Self))]"
				}

				# Military units not available text
				textbox = {
					visible = "[And(MapListOption.GetBuildingData.GetBuilding.GetBuildingType.IsMilitaryBuilding, IsZero(Building.GetExpansionLevel))]"
					alpha = "[TransparentIfTrue('(bool)yes')]"

					min_width = 85
					align = right|nobaseline

					datacontext = "[MapListOption.AccessBuildingData.AccessBuilding]"
					datacontext = "[MapListOption.AccessBuildingData.GetMilitaryFormation]"
					text = "NOT_AVAILABLE"
					elide = right
				}

				box_vertical_divider = {
					visible = "[MapListOption.GetBuildingData.GetBuilding.GetBuildingType.IsMilitaryBuilding]"
				}

				# Region name
				textbox = {
					min_width = 78
					align = right|nobaseline

					datacontext = "[MapListOption.GetBuildingData.GetBuilding]"
					raw_text = "#v [Building.GetState.GetStateRegion.GetStrategicRegion.GetName]#!"
					elide = right
					visible = "[MapListOption.GetBuildingData.GetBuilding.GetBuildingType.IsMilitaryBuilding]"
				}

				box_vertical_divider = {
					visible = "[MapListOption.GetBuildingData.GetBuilding.GetBuildingType.IsMilitaryBuilding]"
				}

				# Construction efficiency text
				textbox = {
					min_width = 56
					align = right|nobaseline

					text = "[State.GetConstructionEfficiency|%1+=]"
					tooltip = "[State.GetConstructionEfficiencyTooltip]"
					elide = right
				}

				# Progress bars
				vbox = {
					layoutpolicy_horizontal = expanding
					layoutstretchfactor_horizontal = 2
					margin_left = 5
					min_width = 72
					spacing = 6

					default_progressbar_horizontal = {
						visible = "[Building.IsActive]"
						size = { 65 10 }
						layoutpolicy_horizontal = expanding

						tooltip = "TOOLTIP_BUILDING_EMPLOYMENT"

						blockoverride "values" {
							value = "[FixedPointToFloat(Building.GetEmploymentPercentage)]"
							min = 0
							max = 1
						}
					}

					widget = {
						alpha = "[TransparentIfFalse(Building.IsActive)]"
						visible = "[And(GreaterThan_CFixedPoint(Building.GetMaxCashReserves, '(CFixedPoint)0'), Building.IsActive)]"
						size = { 65 10 }
						layoutpolicy_horizontal = expanding

						using = cash_reserves_tooltip_with_graph

						gold_progressbar_horizontal = {
							size = { 100% 100% }
							alpha = "[TransparentIfFalse(Building.IsActive)]"
							visible = "[And(GreaterThan_CFixedPoint(Building.GetMaxCashReserves, '(CFixedPoint)0'), Building.IsActive)]"

							blockoverride "glow_size" {
								size = { 40 100% }
							}

							parentanchor = vcenter
							blockoverride "values" {
								min = 0
								max = "[FixedPointToFloat(Building.GetMaxCashReserves)]"
								value = "[FixedPointToFloat(Building.GetCurrentCashReserves)]"
							}
						}

						changed_value_decreased_progressbar_horizontal = {
							size = { 100% 100% }
							visible = "[GreaterThan_CFixedPoint(GetPrevTrendValue(Building.GetCashReservesTrend), GetTrendValue(Building.GetCashReservesTrend))]"

							blockoverride "second_progressbar" {}

							blockoverride "values" {
								min = 0
								max = "[FixedPointToFloat(Building.GetMaxCashReserves)]"
								value = "[FixedPointToFloat(Building.GetCurrentCashReserves)]"
							}
							blockoverride "glow_size" {
								size = { 40 100% }
							}
							blockoverride "arrow_texture_density" {
								texture_density = 14 #use to match height of progressbar
							}
						}

						changed_value_increased_progressbar_horizontal = {
							size = { 100% 100% }
							visible = "[GreaterThan_CFixedPoint(GetTrendValue(Building.GetCashReservesTrend), GetPrevTrendValue(Building.GetCashReservesTrend))]"

							blockoverride "second_progressbar" {}

							blockoverride "values" {
								min = 0
								max = "[FixedPointToFloat(Building.GetMaxCashReserves)]"
								value = "[FixedPointToFloat(Building.GetCurrentCashReserves)]"
							}
							blockoverride "glow_size" {
								size = { 40 100% }
							}
							blockoverride "arrow_texture_density" {
								texture_density = 14 #use to match height of progressbar
							}
						}
					}
				}

				# Employment indicator icon
				employment_indicator_icon = {
					blockoverride "indicator_icon_size" {
						size = { 28 28 }
					}
				}
			}
		}

		divider_clean = {
			parentanchor = hcenter
			size = { 520 1 }
			visible = "[Building.IsActive]"
		}

		margin_widget = {
			visible = "[Building.IsActive]"
			size = { 520 43 }
			margin_bottom = 10
			margin_left = 10

			hbox = {
				minimumsize = { 520 43 }
				spacing = 10

				widget = {
					layoutpolicy_horizontal = preferred
					layoutpolicy_vertical = expanding

					condensed_building_information_pms = {
						blockoverride "pms_slot_sizes" {
							addcolumn = 32
							addrow = 33
						}

						blockoverride "pms_item_size" {
							size = { 33 33 }
						}

						blockoverride "pms_minimumsize" {
							minimumsize = { 160 30 }
						}

						blockoverride "pms_number_visibility" {
							visible = no
						}
					}
				}

				widget = {
					layoutpolicy_horizontal = expanding
					layoutpolicy_vertical = expanding
				}

				hbox = {
					visible = "[LessThan_int32(GetDataModelSize(Building.AccessConsumedGoods), '(int32)4')]"
					datamodel = "[Building.AccessConsumedGoods]"
					spacing = 5

					item = {
						margin_widget = {
							size = { 40 30 }
							margin_right = 10
							tooltip = "[Goods.GetStatePriceDesc]"

							icon = {
								size = { 30 30 }
								texture = "[Goods.GetTexture]"

								textbox = {
									text = "[Goods.GetCompareIconAgainstBasePriceNoTooltip( Goods.GetStatePrice )]"
									align = nobaseline
									autoresize = yes
									parentanchor = bottom|right
									position = { 5 2 }
								}
							}
						}
					}
				}

				overlappingitembox = {
					visible = "[GreaterThanOrEqualTo_int32(GetDataModelSize(Building.AccessConsumedGoods), '(int32)4')]"
					minimumsize = { 170 30 }
					datamodel = "[Building.AccessConsumedGoods]"

					item = {
						widget = {
							size = { 40 30 }
							parentanchor = vcenter
							tooltip = "[Goods.GetStatePriceDesc]"

							icon = {
								size = { 30 30 }
								texture = "[Goods.GetTexture]"
								parentanchor = vcenter

								textbox = {
									text = "[Goods.GetCompareIconAgainstBasePriceNoTooltip( Goods.GetStatePrice )]"
									align = nobaseline
									autoresize = yes
									parentanchor = bottom|right
									position = { 5 2 }
								}
							}
						}
					}
				}

				widget = {
					size = { 30 30 }
					visible = "[Or(And(Not(IsDataModelEmpty(Building.AccessConsumedGoods)), Not(IsDataModelEmpty(Building.AccessProducedGoods))), Building.IsMilitaryBuilding )]"

					icon = {
						size = { 20 20 }
						texture = "gfx/interface/icons/generic_icons/turns_into.dds"
						parentanchor = center
					}
				}

				hbox = {
					margin_right = 5
					
					visible = "[LessThan_int32(GetDataModelSize(Building.AccessProducedGoods), '(int32)4')]"
					datamodel = "[Building.AccessProducedGoods]"
					
					spacing = 5

					item = {
						widget = {
							size = { 40 30 }
							tooltip = "[Goods.GetStatePriceDesc]"

							icon = {
								size = { 30 30 }
								texture = "[Goods.GetTexture]"
								parentanchor = vcenter

								textbox = {
									text = "[Goods.GetCompareIconAgainstBasePriceNoTooltip( Goods.GetStatePrice )]"
									align = nobaseline
									autoresize = yes
									parentanchor = bottom|right
									position = { 5 2 }
								}
							}
						}
					}
				}

				overlappingitembox = {
					visible = "[GreaterThanOrEqualTo_int32(GetDataModelSize(Building.AccessProducedGoods), '(int32)4')]"
					size = { 170 30 }
					datamodel = "[Building.AccessProducedGoods]"

					item = {
						widget = {
							size = { 40 30 }
							tooltip = "[Goods.GetStatePriceDesc]"

							icon = {
								size = { 30 30 }
								texture = "[Goods.GetTexture]"
								parentanchor = vcenter

								textbox = {
									text = "[Goods.GetCompareIconAgainstBasePriceNoTooltip( Goods.GetStatePrice )]"
									align = nobaseline
									autoresize = yes
									parentanchor = bottom|right
									position = { 5 2 }
								}
							}
						}
					}
				}

				textbox = {
					autoresize = yes
					align = nobaseline
					datacontext = "[MapListOption.AccessBuildingData.AccessBuilding]"
					datacontext = "[MapListOption.AccessBuildingData.GetMilitaryFormation]"
					text = "UNITS_PROVIDED_FROM_BUILDING"
					tooltip = "UNITS_PROVIDED_FROM_BUILDING_TOOLTIP"
					elide = right
					margin_right = 10
					visible = "[Building.IsMilitaryBuilding]"
					alpha = "[TransparentIfZero_int32(Building.GetNumCombatUnitsProvidedToFormation(MilitaryFormation.Self))]"
				}
			}
		}
	}

	type construction_headers_condensed = flowcontainer {
		parentanchor = hcenter
		sort_button = {
			align = hcenter|nobaseline
			text = "BUILDING_MAP_LIST_PANEL_STATE_HEADER"
			tooltip = "BUILDING_MAP_LIST_PANEL_STATE_HEADER_TOOLTIP"
			size = { 120 20 }
			onclick = "[MapListPanel.Sort('state')]"
		}

		sort_button = {
			align = hcenter|nobaseline
			tooltip = "BUILDING_LEVEL_HEADER_TOOLTIP"
			size = { 70 20 }
			onclick = "[MapListPanel.Sort('size')]"
			icon = {
				texture = "gfx/interface/buttons/sort_button_icons/sort_icon_size.dds"
				size = { 25 25 }
				parentanchor = center
				alwaystransparent = yes
			}
		}

		sort_button = {
			align = hcenter|nobaseline
			text = "BUILDING_MAP_LIST_PANEL_INFRASTRUCTURE_HEADER"
			tooltip = "BUILDING_MAP_LIST_PANEL_INFRASTRUCTURE_HEADER_TOOLTIP"
			size = { 60 20 }
			onclick = "[MapListPanel.Sort('infrastructure_balance')]"
			visible = "[Not(MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding)]"
		}
		sort_button = {
			align = hcenter|nobaseline
			text = "concept_units_short"
			size = { 105 20 }
			visible = "[MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding]"
			onclick = "[MapListPanel.Sort('units')]"
		}

		### SETTING - JOBSEEKERS
		sort_button = {
			align = hcenter|nobaseline
			text = "BUILDING_MAP_LIST_PANEL_AVAILABLE_LABOR_HEADER"
			tooltip = "BUILDING_MAP_LIST_PANEL_AVAILABLE_LABOR_HEADER_TOOLTIP"
			size = { 85 20 }
			onclick = "[MapListPanel.Sort('jobseekers')]"
			visible = "[Not(GetVariableSystem.HasValue('hide_jobseekers', 'true'))]"
		}

		### SETTING - PEASANTS
		sort_button = {
			align = hcenter|nobaseline
			text = "peasants_no_icon"
			size = { 85 20 }
			onclick = "[MapListPanel.Sort('peasants')]"
			visible = "[GetVariableSystem.HasValue('show_peasants', 'true')]"
		}

		### SETTING - UNEMPLOYED
		sort_button = {
			align = hcenter|nobaseline
			text = "concept_unemployed"
			size = { 85 20 }
			onclick = "[MapListPanel.Sort('unemployed')]"
			visible = "[GetVariableSystem.HasValue('show_unemployed', 'true')]"
		}

		flowcontainer = {
			visible = "[Not(MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding)]"
			sort_button = {
				align = hcenter|nobaseline
				tooltip = "BUILDING_PROFITABILITY_HEADER_TOOLTIP"
				size = { 70 20 }
				onclick = "[MapListPanel.Sort('profitability')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_profitability.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
				visible = "[Not(ObjectsEqual(MapListBuildingPanel.GetBuildingType, GetBuildingType('building_government_administration').Self))]"
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "concept_tax"
				tooltip = "BUILDING_TAXATION_CAPACITY_HEADER_TOOLTIP"
				size = { 70 20 }
				onclick = "[MapListPanel.Sort('tax_capacity_balance')]"
				visible = "[ObjectsEqual(MapListBuildingPanel.GetBuildingType, GetBuildingType('building_government_administration').Self)]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "BUILDING_MAP_LIST_PANEL_PROFIT_IMPACT_HEADER"
				tooltip = "BUILDING_MAP_LIST_PANEL_PROFIT_IMPACT_TOOLTIP"
				size = { 80 20 }
				onclick = "[MapListPanel.Sort('profit_impact')]"
			}
		}

		sort_button = {
			align = hcenter|nobaseline
			text = "[concept_hq]"
			size = { 105 20 }
			onclick = "[MapListPanel.Sort('strategic_region')]"
			visible = "[MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding]"
		}

		sort_button = {
			align = hcenter|nobaseline
			tooltip = "BUILDING_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
			size = { 55 20 }
			onclick = "[MapListPanel.Sort('status')]"
			icon = {
				texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
				size = { 25 25 }
				parentanchor = center
				alwaystransparent = yes
			}
		}
	}

	type construction_headers_full = flowcontainer {
		direction = vertical
		parentanchor = hcenter

		### TOP ROW
		flowcontainer = {

			sort_button = {
				align = hcenter|nobaseline
				text = "BUILDING_MAP_LIST_PANEL_STATE_HEADER"
				tooltip = "BUILDING_MAP_LIST_PANEL_STATE_HEADER_TOOLTIP"
				size = { 230 20 }
				onclick = "[MapListPanel.Sort('state')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "TRAITS"
				tooltip = "SORT_TRAITS_TOOLTIP"
				size = { 120 20 }
				onclick = "[MapListPanel.Sort('traits')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				tooltip = "BUILDING_LEVEL_HEADER_TOOLTIP"
				size = { 95 20 }
				onclick = "[MapListPanel.Sort('size')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_size.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}

			sort_button = {
				align = hcenter|nobaseline
				tooltip = "BUILDING_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				size = { 95 20 }
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		### BOTTOM ROW
		flowcontainer = {

			sort_button = {
				align = hcenter|nobaseline
				text = "CONTROLLER"
				tooltip = "SORT_CONTROLLER_TOOLTIP"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('controller')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "BUILDING_MAP_LIST_PANEL_INFRASTRUCTURE_HEADER"
				tooltip = "BUILDING_MAP_LIST_PANEL_INFRASTRUCTURE_HEADER_TOOLTIP"
				size = { 50 20 }
				onclick = "[MapListPanel.Sort('infrastructure_balance')]"
				visible = "[Not(MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding)]"
			}

			### SETTING - JOBSEEKERS
			sort_button = {
				align = hcenter|nobaseline
				text = "BUILDING_MAP_LIST_PANEL_AVAILABLE_LABOR_HEADER"
				tooltip = "BUILDING_MAP_LIST_PANEL_AVAILABLE_LABOR_HEADER_TOOLTIP"
				size = { 95 20 }
				onclick = "[MapListPanel.Sort('jobseekers')]"
				visible = "[Not(GetVariableSystem.HasValue('hide_jobseekers', 'true'))]"
			}

			### SETTING - PEASANTS
			sort_button = {
				align = hcenter|nobaseline
				text = "peasants_no_icon"
				size = { 95 20 }
				onclick = "[MapListPanel.Sort('peasants')]"
				visible = "[GetVariableSystem.HasValue('show_peasants', 'true')]"
			}

			### SETTING - UNEMPLOYED
			sort_button = {
				align = hcenter|nobaseline
				text = "concept_unemployed"
				size = { 95 20 }
				onclick = "[MapListPanel.Sort('unemployed')]"
				visible = "[GetVariableSystem.HasValue('show_unemployed', 'true')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "concept_units_short"
				size = { 100 20 }
				visible = "[MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding]"
				onclick = "[MapListPanel.Sort('units')]"
			}

			flowcontainer = {
				visible = "[Not(MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding)]"
				sort_button = {
					align = hcenter|nobaseline
					tooltip = "BUILDING_PROFITABILITY_HEADER_TOOLTIP"
					size = { 70 20 }
					onclick = "[MapListPanel.Sort('profitability')]"
					icon = {
						texture = "gfx/interface/buttons/sort_button_icons/sort_icon_profitability.dds"
						size = { 25 25 }
						parentanchor = center
						alwaystransparent = yes
					}
					visible = "[Not(ObjectsEqual(MapListBuildingPanel.GetBuildingType, GetBuildingType('building_government_administration').Self))]"
				}

				sort_button = {
					align = hcenter|nobaseline
					text = "concept_tax"
					tooltip = "BUILDING_TAXATION_CAPACITY_HEADER_TOOLTIP"
					size = { 70 20 }
					onclick = "[MapListPanel.Sort('tax_capacity_balance')]"
					visible = "[ObjectsEqual(MapListBuildingPanel.GetBuildingType, GetBuildingType('building_government_administration').Self)]"
				}
				sort_button = {
					align = hcenter|nobaseline
					text = "BUILDING_MAP_LIST_PANEL_PROFIT_IMPACT_HEADER"
					tooltip = "BUILDING_MAP_LIST_PANEL_PROFIT_IMPACT_TOOLTIP"
					size = { 80 20 }
					onclick = "[MapListPanel.Sort('profit_impact')]"
				}
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "[concept_hq]"
				size = { 100 20 }
				onclick = "[MapListPanel.Sort('strategic_region')]"
				visible = "[MapListBuildingPanel.GetBuildingType.IsMilitaryBuilding]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "CONSTRUCTION_EFFICIENCY_SHORT"
				tooltip = "SORT_CONSTRUCTION_EFFICIENCY_TOOLTIP"
				size = { 70 20 }
				onclick = "[MapListPanel.Sort('construction_efficiency')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "EMPLOYMENT_SHORT"
				tooltip = "SORT_EMPLOYMENT_TOOLTIP"
				size = { 60 20 }
				onclick = "[MapListPanel.Sort('employment')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "CASH_RESERVES_SHORT"
				tooltip = "SORT_CASH_RESERVES_TOOLTIP"
				size = { 60 20 }
				onclick = "[MapListPanel.Sort('cash_reserves')]"
			}
		}
	}

	type construction_filters = flowcontainer {
		direction = vertical

		section_header_button = {
			blockoverride "left_text" {
				text = "FILTERS"
				fontsize_min = 12
				elide = right
			}

			blockoverride "right_text" {
				section_header_right_text = {
					text = "CURRENT_CONSTRUCTION_FILTER_DESC"
				}
			}

			blockoverride "onclick" {
				onclick = "[GetVariableSystem.Toggle( 'construction_interaction_filters' )]"
			}

			blockoverride "onclick_showmore" {
				visible = "[Not(GetVariableSystem.Exists( 'construction_interaction_filters' ))]"
			}

			blockoverride "onclick_showless" {
				visible = "[GetVariableSystem.Exists( 'construction_interaction_filters' )]"
			}
		}

		flowcontainer = {
			visible = "[GetVariableSystem.Exists( 'construction_interaction_filters' )]"
			minimumsize = { @panel_width_plus_14 -1 }
			parentanchor = hcenter
			spacing = 10
			margin_bottom = 10

			background = {
				using = dark_area
			}

			flowcontainer = {
				direction = vertical

				textbox = {
					multiline = yes
					size = { 95 60 }
					text = "LOCATION"
					align = right|nobaseline
					margin_right = 10
					margin_left = 10
				}

				textbox = {
					multiline = yes
					size = { 95 60 }
					text = "LIST_ITEM"
					align = right|nobaseline
					margin_right = 10
					margin_left = 10
				}

				textbox = {
					multiline = yes
					size = { 95 60 }
					text = "WORKFORCE"
					align = right|nobaseline
					margin_right = 10
					margin_left = 10
				}
			}

			vertical_divider = {}

			flowcontainer = {
				direction = vertical
				margin_top = 10
				spacing = 20
				margin_left = 10

				flowcontainer = {
					spacing = 5

					filter_button = {
						visible = "[Not(MapListBuildingPanel.HasFilter('all'))]"
						size = { 132 40 }

						tooltip = "LOCATION_FILTER_ALL"
						using = tooltip_above

						blockoverride "text" {
							text = "ALL"
						}

						blockoverride "onclick" {
							onclick = "[MapListBuildingPanel.SetFilter('all')]"
						}
					}

					filter_background_selected = {
						visible = "[MapListBuildingPanel.HasFilter('all')]"
						size = { 132 40 }

						blockoverride "text" {
							text = "ALL"
						}
					}

					filter_button = {
						visible = "[Not(MapListBuildingPanel.HasFilter('domestic'))]"
						size = { 132 40 }

						tooltip = "LOCATION_FILTER_DOMESTIC"
						using = tooltip_above

						blockoverride "text" {
							text = "DOMESTIC"
						}

						blockoverride "onclick" {
							onclick = "[MapListBuildingPanel.SetFilter('domestic')]"
						}
					}

					filter_background_selected = {
						visible = "[MapListBuildingPanel.HasFilter('domestic')]"
						size = { 132 40 }

						blockoverride "text" {
							text = "DOMESTIC"
						}
					}

					filter_button = {
						visible = "[Not(MapListBuildingPanel.HasFilter('abroad'))]"
						size = { 132 40 }

						tooltip = "LOCATION_FILTER_ABROAD"
						using = tooltip_above

						blockoverride "text" {
							text = "ABROAD"
						}

						blockoverride "onclick" {
							onclick = "[MapListBuildingPanel.SetFilter('abroad')]"
						}
					}

					filter_background_selected = {
						visible = "[MapListBuildingPanel.HasFilter('abroad')]"
						size = { 132 40 }

						blockoverride "text" {
							text = "ABROAD"
						}
					}
				}

				flowcontainer = {

					filter_button = {
						size = { 410 40 }

						blockoverride "text" {
							text = "CONSTRUCTION_CONDENSED_OR_FULL"
						}

						blockoverride "onclick" {
							onclick = "[GetVariableSystem.Toggle('construction_list_toggle_full_or_condensed')]"
						}
					}
				}

				flowcontainer = {
					spacing = 5

					filter_button = {
						size = { 132 40 }

						blockoverride "text" {
							text = "concept_jobseekers"
						}

						visible = "[And(Not(GetVariableSystem.HasValue('hide_jobseekers', 'false')), GetVariableSystem.Exists('hide_jobseekers'))]"

						blockoverride "onclick" {
							onclick = "[GetVariableSystem.Set('hide_jobseekers', 'false')]"
							onclick = "[GetVariableSystem.Set('show_unemployed', 'false')]"
							onclick = "[GetVariableSystem.Set('show_peasants', 'false')]"
						}
					}

					filter_background_selected = {
						visible = "[Not(GetVariableSystem.HasValue('hide_jobseekers', 'true'))]"
						size = { 132 40 }

						blockoverride "text" {
							text = "concept_jobseekers"
						}
					}

					filter_button = {
						size = { 132 40 }

						blockoverride "text" {
							text = "peasants_no_icon"
						}

						visible = "[Or(GetVariableSystem.HasValue('show_peasants', 'false'), Not(GetVariableSystem.Exists('show_peasants')))]"

						blockoverride "onclick" {
							onclick = "[GetVariableSystem.Set('hide_jobseekers', 'true')]"
							onclick = "[GetVariableSystem.Set('show_unemployed', 'false')]"
							onclick = "[GetVariableSystem.Set('show_peasants', 'true')]"
						}
					}

					filter_background_selected = {
						visible = "[GetVariableSystem.HasValue('show_peasants', 'true')]"
						size = { 132 40 }

						blockoverride "text" {
							text = "peasants_no_icon"
						}
					}

					filter_button = {
						size = { 132 40 }

						blockoverride "text" {
							text = "concept_unemployed"
						}

						visible = "[Or(GetVariableSystem.HasValue('show_unemployed', 'false'), Not(GetVariableSystem.Exists('show_unemployed')))]"

						blockoverride "onclick" {
							onclick = "[GetVariableSystem.Set('hide_jobseekers', 'true')]"
							onclick = "[GetVariableSystem.Set('show_unemployed', 'true')]"
							onclick = "[GetVariableSystem.Set('show_peasants', 'false')]"
						}
					}

					filter_background_selected = {
						visible = "[GetVariableSystem.HasValue('show_unemployed', 'true')]"
						size = { 132 40 }

						blockoverride "text" {
							text = "concept_unemployed"
						}
					}
				}
			}
		}

		widget = {
			visible = "[GetVariableSystem.Exists( 'construction_interaction_filters' )]"
			size = { 5 5 }
		}
	}

	### COLONIES
	type colony_map_list_panel = map_list_panel {
		name = "colony_map_list_panel"

		blockoverride "headers" {
			sort_button = {
				align = nobaseline
				margin = { 10 0 }
				text = "COLONY_MAP_LIST_PANEL_STATE_HEADER"
				tooltip = "COLONY_MAP_LIST_PANEL_STATE_HEADER_TOOLTIP"
				size = { 160 20 }
				onclick = "[MapListPanel.Sort('state')]"
			}

			sort_button = {
				align = nobaseline
				margin = { 10 0 }
				text = "COLONY_MAP_LIST_PANEL_REGION_HEADER"
				tooltip = "COLONY_MAP_LIST_PANEL_REGION_HEADER_TOOLTIP"
				size = { 205 20 }
				onclick = "[MapListPanel.Sort('region')]"
			}

			sort_button = {
				align = nobaseline
				margin = { 10 0 }
				text = "COLONY_MAP_LIST_PANEL_STATE_TRAITS_HEADER"
				tooltip = "COLONY_MAP_LIST_PANEL_STATE_TRAITS_HEADER_TOOLTIP"
				size = { 120 20 }
				enabled = no
			}

			sort_button = {
				align = hcenter|nobaseline
				tooltip = "COLONY_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {
					blockoverride "values" {
						textbox = {
							size = { 160 25 }
							align = nobaseline
							text = "[MapListOption.GetColonyData.GetState]"
							parentanchor = vcenter
							elide = right
							margin_left = 10
						}

						textbox = {
							size = { 205 25 }
							align = nobaseline
							text = "[MapListOption.GetColonyData.GetRegion]"
							parentanchor = vcenter
							elide = right
							margin_left = 10
						}

						flowcontainer = {
							datamodel = "[MapListOption.GetColonyData.GetStateRegion.AccessTraits]"
							parentanchor = vcenter
							spacing = 5
							minimumsize = { 120 -1 }
							maximumsize = { 120 -1 }

							item = {
								icon = {
									size = { 35 35 }
									tooltip = TOOLTIP_STATE_TRAIT
									onmousehierarchyenter = "[AccessHighlightManager.HighlightStateTrait(StateTrait.Self)]"
									onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
									alwaystransparent = no
									texture = "[StateTrait.GetTexture]"
								}
							}
						}
					}
				}
			}
		}
	}

	### DIPLO ACTIONS
	type diplo_action_map_list_panel = map_list_panel {
		name = "diplo_action_map_list_panel"

		blockoverride "headers" {
			sort_button = {
				align = hcenter|nobaseline
				text = "DIPLO_ACTION_LIST_PANEL_STATUS_HEADER"
				tooltip = "DIPLO_ACTION_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				size = { 260 20 }
				onclick = "[MapListPanel.Sort('country')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "TRADE_ROUTES_SORT_COST"
				size = { 105 20 }
				onclick = "[MapListPanel.Sort('cost')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "ACCEPTANCE"
				size = { 120 20 }
				onclick = "[MapListPanel.Sort('acceptance')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				tooltip = "DEFAULT_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		blockoverride "button_tooltip" {
			datacontext = "[MapListOption.GetDiploActionData.GetDiplomaticAction]"
			using = diplomatic_action_tooltip
		}

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {
					blockoverride "name_button_visibility" {
						visible = yes
					}

					blockoverride "name_button_size" {
						size = { 255 40 }
					}

					widget = {
						widgetid = "[Concatenate('tutorial_highlight_country_map_list_', MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry.GetIDString)]"
						size = { 100% 100% }
					}

					blockoverride "name_button_properties" {
						onclick = "[InformationPanelBar.OpenCountryPanel(MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry)]"
						onrightclick = "[RightClickMenuManager.ShowForCountry(MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry)]"

						tooltipwidget = {
							FancyTooltip_Country = {
								datacontext = "[MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry]"
							}
						}
						
						textbox = {
							margin = { 10 0 }
							size = { 250 25 }
							align = nobaseline
							text = "[MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry.GetName]"
							parentanchor = vcenter
							elide = right
							fontsize_min = 12
						}
					}

					blockoverride "values" {
						datacontext = "[MapListOption.GetDiploActionData.GetDiplomaticAction]"
						
						textbox = {
							raw_text = "@inf! [DiplomaticAction.GetMaintenanceCost|v0]"
							tooltip = "[DiplomaticAction.GetMaintenanceCostDesc]"
							parentanchor = vcenter
							align = right|nobaseline
							size = { 105 25 }
							alpha = "[TransparentIfZero(DiplomaticAction.GetMaintenanceCost)]"
						}

						container = {
							parentanchor = center
							minimumsize = { 120 -1 }
							diplomatic_action_acceptance_icon = {
								blockoverride "parentanchor" {
									parentanchor = center
								}
							}

							textbox = {
								visible = "[Not(DiplomaticAction.RequiresApproval)]"
								text = "NOT_AVAILABLE"
								autoresize = yes
								align = nobaseline
								parentanchor = center
								alpha = 0.5
							}
						}

						widget = { size = { 5 5 }}
					}

					blockoverride "whole_widget_highlight" {
						highlight_tutorial = {
							visible = "[MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry.IsBeingTutorialHighlighted]"
							size = { 100% 90% }
						}
					}
				}
			}
		}
	}

	### DIPLO ACTIONS - Rivalry
	type diplo_action_rivalry_map_list_panel = map_list_panel {
		name = "diplo_action_rivalry_map_list_panel"

		blockoverride "headers" {
			sort_button = {
				align = hcenter|nobaseline
				text = "DIPLO_ACTION_LIST_PANEL_STATUS_HEADER"
				tooltip = "DIPLO_ACTION_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				size = { 260 20 }
				onclick = "[MapListPanel.Sort('country')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "DIPLO_ACTION_LIST_PANEL_STATUS_RIVALRY_GAINS"
				tooltip = "DIPLO_ACTION_LIST_PANEL_STATUS_RIVALRY_GAINS_TOOLTIP"
				size = { 105 20 }
				onclick = "[MapListPanel.Sort('gains')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "ACCEPTANCE"
				size = { 120 20 }
				onclick = "[MapListPanel.Sort('acceptance')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				tooltip = "DEFAULT_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {
					blockoverride "name_button_visibility" {
						visible = yes
					}

					blockoverride "name_button_size" {
						size = { 255 40 }
					}

					blockoverride "name_button_properties" {
						onclick = "[InformationPanelBar.OpenCountryPanel(MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry)]"
						onrightclick = "[RightClickMenuManager.ShowForCountry(MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry)]"

						tooltipwidget = {
							FancyTooltip_Country = {
								datacontext = "[MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry]"
							}
						}
						
						textbox = {
							margin = { 10 0 }
							size = { 250 25 }
							align = nobaseline
							text = "[MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry.GetName]"
							parentanchor = vcenter
							elide = right
							fontsize_min = 12
						}
					}

					blockoverride "button_tooltip" {
						datacontext = "[MapListOption.GetDiploActionData.GetDiplomaticAction]"
						using = diplomatic_action_tooltip
					}

					blockoverride "values" {
						datacontext = "[MapListOption.GetDiploActionData.GetDiplomaticAction]"
						
						textbox = {
							raw_text = "@inf! [DiplomaticAction.GetRivalryGains|0=+]"
							tooltip = "[DiplomaticAction.GetRivalryGainsDetailsDesc]"
							parentanchor = vcenter
							align = hcenter|nobaseline
							size = { 110 25 }
							alpha = "[TransparentIfZero(DiplomaticAction.GetRivalryGains)]"
						}

						container = {
							parentanchor = center
							minimumsize = { 115 -1 }
							diplomatic_action_acceptance_icon = {
								blockoverride "parentanchor" {
									parentanchor = center
								}
							}

							textbox = {
								visible = "[Not(DiplomaticAction.RequiresApproval)]"
								text = "NOT_AVAILABLE"
								autoresize = yes
								align = nobaseline
								parentanchor = center
								alpha = 0.5
							}
						}

						widget = { size = { 5 5 }}
					}
				}
			}
		}
	}

	### DECREES
	type decree_map_list_panel = map_list_panel {
		name = "decree_map_list_panel"

		blockoverride "headers" {
			sort_button = {
				size = { 415 30 }
				align = hcenter|nobaseline
				text = "DECREE_LIST_PANEL_STATE_HEADER"
				tooltip = "DECREE_LIST_PANEL_STATE_HEADER_TOOLTIP"
				onclick = "[MapListPanel.Sort('state')]"
			}

			sort_button = {
				visible = yes
				size = { 70 30 }
				align = hcenter|nobaseline
				text = "DECREE_LIST_PANEL_COST_HEADER"
				tooltip = "DECREE_LIST_PANEL_COST_HEADER_TOOLTIP"
				onclick = "[MapListPanel.Sort('cost')]"
			}

			sort_button = {
				size = { 55 20 }
				tooltip = "DECREE_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {
					blockoverride "name_button_visibility" {
						visible = yes
					}

					blockoverride "name_button_size" {
						size = { 215 40 }
					}

					blockoverride "name_button_properties" {

						datacontext = "[MapListOption.GetDecreeData.GetState]"

						onmousehierarchyenter = "[AccessHighlightManager.HighlightState(State.Self)]"
						onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"

						onclick = "[InformationPanelBar.OpenStatePanel(State.AccessSelf)]"
						onrightclick = "[RightClickMenuManager.ShowForState(State.AccessSelf)]"
						
						tooltipwidget = {
							FancyTooltip_State = {}
						}

						textbox = {
							visible = "[Not(And(State.IsUnincorporated, Not(State.IsIncorporating)))]"
							margin = { 10 0 }
							size = { 210 25 }
							align = nobaseline
							text = "[State.GetNameNoFormatting]"
							parentanchor = vcenter
							elide = right
							fontsize_min = 12
						}

						textbox = {
							visible = "[And(State.IsUnincorporated, Not(State.IsIncorporating))]"
							margin = { 10 0 }
							size = { 190 25 }
							align = nobaseline
							text = "[State.GetNameNoFormatting]"
							parentanchor = vcenter
							elide = right
							fontsize_min = 12
						}

						icon = {
							visible = "[And(State.IsUnincorporated, Not(State.IsIncorporating))]"
							parentanchor = right|vcenter
							position = { -10 0 }
							size = { 25 25 }
							texture = "gfx/interface/icons/state_status_icons/unincorporated_state.dds"
						}
					}

					blockoverride "values" {
						textbox = {
							parentanchor = right|vcenter
							#"[ObjectsEqual(MapListDecreePanel.GetDecreeType, GetDecreeType('decree_road_maintenance'))]"
							text = "MAP_LIST_DECREE_COST"
							size = { 270 30 }
							align = right|nobaseline
							margin_right = 10
							elide = right
							fontsize_min = 12
						}
					}
				}
			}
		}
	}

	### FORMATIONS
	type military_formation_map_list_panel = map_list_panel {
		name = "military_formation_map_list_panel"

		blockoverride "headers" {
			sort_button = {
				size = { 385 30 }
				align = hcenter|nobaseline
				text = "MILITARY_FORMATION_LIST_PANEL_DESTINATION_HEADER"
				tooltip = "MILITARY_FORMATION_LIST_PANEL_DESTINATION_HEADER_TOOLTIP"
				onclick = "[MapListPanel.Sort('destination')]"
			}

			sort_button = {
				visible = yes
				size = { 100 30 }
				align = hcenter|nobaseline
				text = "MILITARY_FORMATION_LIST_PANEL_TRAVEL_TIME_HEADER"
				tooltip = "MILITARY_FORMATION_LIST_PANEL_TRAVEL_TIME_HEADER_TOOLTIP"
				onclick = "[MapListPanel.Sort('travel_time')]"
			}

			sort_button = {
				size = { 55 20 }
				tooltip = "MILITARY_FORMATION_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {
					blockoverride "values" {
						textbox = {
							parentanchor = vcenter
							text = "[MapListOption.GetTitle]"
							size = { 385 30 }
							align = nobaseline
							margin_left = 10
							elide = right
							fontsize_min = 12
						}

						textbox = {
							parentanchor = vcenter
							text = "MAP_LIST_MILITARY_FORMATION_TRAVEL_TIME"
							size = { 100 30 }
							align = nobaseline
							margin_left = 10
							elide = right
							fontsize_min = 12
						}
					}
				}
			}
		}
	}

	type military_formation_deploy_map_list_panel = map_list_panel {
		name = "military_formation_deploy_map_list_panel"

		blockoverride "headers" {
			sort_button = {
				size = { 192 20 }
				align = hcenter|nobaseline
				text = "MILITARY_FORMATION_LIST_PANEL_DESTINATION_HEADER"
				tooltip = "MILITARY_FORMATION_LIST_PANEL_DESTINATION_HEADER_TOOLTIP"
				onclick = "[MapListPanel.Sort('destination')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "MILITARY_FORMATION_LIST_PANEL_ADVANTAGE_HEADER"
				tooltip = "MILITARY_FORMATION_LIST_PANEL_ADVANTAGE_HEADER_TOOLTIP"
				size = { 98 20 }
				onclick = "[MapListPanel.Sort('advantage')]"
			}

			sort_button = {
				size = { 98 20 }
				align = hcenter|nobaseline
				text = "MILITARY_FORMATION_LIST_PANEL_UNITS_HEADER"
				tooltip = "MILITARY_FORMATION_LIST_PANEL_UNITS_HEADER_TOOLTIP"
				onclick = "[MapListPanel.Sort('units')]"
			}

			sort_button = {
				visible = yes
				size = { 98 20 }
				align = hcenter|nobaseline
				text = "MILITARY_FORMATION_LIST_PANEL_TRAVEL_TIME_HEADER"
				tooltip = "MILITARY_FORMATION_LIST_PANEL_TRAVEL_TIME_HEADER_TOOLTIP"
				onclick = "[MapListPanel.Sort('travel_time')]"
			}

			sort_button = {
				size = { 55 20 }
				tooltip = "MILITARY_FORMATION_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {
					datacontext = "[MapListOption.GetFrontData.GetFront]"

					blockoverride "name_button_visibility" {
						visible = yes
					}

					blockoverride "name_button_size" {
						size = { 192 40 }
					}

					blockoverride "name_button_properties" {
						onmousehierarchyenter = "[AccessHighlightManager.HighlightFront( Front.Self )]"
						onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"

						onclick = "[InformationPanelBar.OpenFrontPanel(Front.AccessSelf)]"

						textbox = {
							margin = { 10 0 }
							size = { 192 25 }
							align = nobaseline
							text = "[MapListOption.GetTitle]"
							parentanchor = vcenter
							elide = right
							fontsize_min = 14
						}
					}

					blockoverride "values" {						
						textbox = {
							visible = "[Not(StringIsEmpty( Front.GetPlayerAdvantageDesc ))]"
							tooltip = "[Front.GetPlayerAdvantageDesc]"
							raw_text = "#v [Front.GetPlayerAdvantageRaw|+]#!"
							size = { 98 25 }
							align = hcenter|nobaseline
							elide = right
							parentanchor = center
						}

						textbox = {
							margin = { 5 0 }
							size = { 98 25 }
							align = hcenter|nobaseline
							tooltip = "[Front.GetPlayerSideUnitsTooltip]"
							raw_text = "MAP_LIST_MILITARY_FORMATION_UNITS"
							parentanchor = vcenter
							elide = right
							using = tooltip_above
						}

						textbox = {
							parentanchor = vcenter
							text = "MAP_LIST_MILITARY_FORMATION_TRAVEL_TIME"
							size = { 98 30 }
							align = nobaseline
							margin_left = 10
							elide = right
							fontsize_min = 12
						}
					}

					blockoverride "interaction" {
						enabled = "[MapListOption.CanClick]"
						onclick = "[MapListOption.OnClick]"
						onmousehierarchyenter = "[AccessHighlightManager.HighlightFront( Front.Self )]"
						onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
					}
				}
			}
		}
	}

	### MARKETS
	type markets_map_list_panel = map_list_panel {
		name = "markets_map_list_panel"

		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "headers" {
			sort_button = {
				align = nobaseline
				text = "MARKET"
				size = { 430 20 }
				onclick = "[MapListPanel.Sort('name')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "GDP_SHORT"
				tooltip = "GDP"
				size = { 110 20 }
				onclick = "[MapListPanel.Sort('gdp')]"
			}
		}

		blockoverride "values" {
			textbox = {
				margin = { 5 0 }
				size = { 430 25 }
				align = nobaseline
				text = "[MapListOption.GetMarketData.GetMarket.GetName]"
				parentanchor = vcenter
				elide = right
			}

			textbox = {
				datacontext = "[MapListOption.GetMarketData.GetMarket]"
				margin = { 5 0 }
				size = { 100 25 }
				align = right|nobaseline
				raw_text = "@money![Market.GetMarketGDPValue|Dv]"
				parentanchor = vcenter
				elide = right
			}
		}

		blockoverride "interaction" {
			onclick = "[InformationPanelBar.OpenMarketPanel(MapListOption.AccessMarketData.AccessMarket)]"
			onrightclick = "[RightClickMenuManager.ShowForMarket(MapListOption.AccessMarketData.AccessMarket)]"
			onmousehierarchyenter = "[AccessHighlightManager.HighlightMarket(MapListOption.GetMarketData.GetMarket)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
		}
	}

	### POWER BLOCS
	type power_blocs_map_list_panel = map_list_panel {
		name = "power_blocs_map_list_panel"

		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "headers" {
			sort_button = {
				align = nobaseline
				text = "NAME"
				tooltip = "NAME"
				size = { 140 20 }
				onclick = "[MapListPanel.Sort('name')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "POWER_BLOC_LEDGER_COLUMN_LEADER"
				tooltip = "POWER_BLOC_LEDGER_COLUMN_LEADER"
				size = { 70 20 }
				onclick = "[MapListPanel.Sort('leader')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "POWER_BLOC_LEDGER_COLUMN_MEMBERS"
				tooltip = "POWER_BLOC_LEDGER_COLUMN_MEMBERS"
				size = { 85 20 }
				onclick = "[MapListPanel.Sort('num_members')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "POWER_BLOC_LEDGER_COLUMN_IDENTITY"
				tooltip = "POWER_BLOC_LEDGER_COLUMN_IDENTITY"
				size = { 80 20 }
				onclick = "[MapListPanel.Sort('identity')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "POWER_BLOC_LEDGER_COLUMN_PRINCIPLES"
				tooltip = "POWER_BLOC_LEDGER_COLUMN_PRINCIPLES"
				size = { 85 20 }
				onclick = "[MapListPanel.Sort('principles')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "ACCEPTANCE"
				size = { 80 20 }
				onclick = "[MapListPanel.Sort('acceptance')]"
			}
		}

		blockoverride "values" {
			datacontext = "[MapListOption.AccessPowerBlocData.AccessPowerBloc]"

			textbox = {
				margin_left = 15
				size = { 170 25 }
				align = nobaseline
				text = "[PowerBloc.GetName]"
				parentanchor = vcenter
				elide = right
			}

			textbox = {
				datacontext = "[PowerBloc.GetLeader]"
				size = { 80 25 }
				align = nobaseline
				text = "[Country.GetFlagTextIcon]"
				parentanchor = vcenter
				elide = right

				tooltipwidget = {
					FancyTooltip_Country = {}
				}
			}

			textbox = {
				size = { 55 25 }
				align = nobaseline
				text = "[GetDataModelSize(PowerBloc.GetMembers)]"
				tooltip = "POWER_BLOC_NUMBER_OF_COUNTRIES_TOOLTIP"
				parentanchor = vcenter
				elide = right
				default_format = "#v"
			}

			widget = {
				size = { 65 30 }

				icon = {
					datacontext = "[PowerBloc.GetIdentity]"
					parentanchor = center
					texture = "[PowerBlocIdentity.GetIcon]"
					size = { 30 30 }

					tooltipwidget = {
						FancyTooltip_PowerBlocIdentity = {}
					}
				}
			}

			# Principles
			widget = {
				size = { 100 30 }

				overlappingitembox = {
					parentanchor = center
					maximumsize = { 90 -1 }
					spacing = 2
					autoresize = yes
					datamodel = "[PowerBloc.GetPrinciples]"

					item = {
						icon = {
							size = { 25 25 }
							texture = "[PowerBlocPrinciple.GetIcon]"

							tooltipwidget = {
								FancyTooltip_PowerBlocPrinciple = {}
							}
						}
					}
				}
			}

			### Acceptance
			widget = {
				size = { 60 30 }
				datacontext = "[MapListPowerBlocsPanel.GetDiplomaticAction(PowerBloc.Self)]"

				minimumsize = { 55 -1 }
				diplomatic_action_acceptance_icon = {
					blockoverride "parentanchor" {
						parentanchor = center
					}
				}
			}
		}

		blockoverride "interaction" {
			enabled = "[MapListOption.CanClick]"
			onclick = "[MapListOption.OnClick]"
			onrightclick = "[MapListOption.OnRightClick]"
			onmousehierarchyenter = "[AccessHighlightManager.HighlightPowerBloc(MapListOption.GetPowerBlocData.GetPowerBloc.Self)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"

			tooltipwidget = {
				FancyTooltip_PowerBloc = {
					datacontext = "[MapListOption.GetPowerBlocData.GetPowerBloc]"
				}
			}
		}
	}

	### Invite to power bloc
	type power_bloc_invitation_map_list_panel = map_list_panel {
		name = "power_bloc_invitation_map_list_panel"

		blockoverride "headers" {
			### Country
			sort_button = {
				align = nobaseline
				text = "concept_country"
				size = { 260 20 }
				onclick = "[MapListPanel.Sort('country')]"
			}

			### Leverage value
			sort_button = {
				align = hcenter|nobaseline
				text = "concept_power_bloc_leverage_advantage"
				tooltip = "POWER_BLOC_LEVERAGE_ADVANTAGE_TOOLTIP"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('leverage_advantage')]"
			}

			### Rank
			sort_button = {
				align = hcenter|nobaseline
				size = { 55 40 }
				onclick = "[MapListPanel.Sort('rank')]"

				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_rank.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}

				tooltip = "SORT_BY_RANK"
			}

			### Cohesion value change
			sort_button = {
				align = hcenter|nobaseline
				text = "concept_power_bloc_cohesion"
				tooltip = "PREDICTED_COHESTION_CHANGE"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('cohesion')]"
			}

			### Acceptance
			sort_button = {
				align = hcenter|nobaseline
				text = "ACCEPTANCE"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('acceptance')]"
			}

			### Status
			sort_button = {
				align = hcenter|nobaseline
				tooltip = "DEFAULT_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		blockoverride "button_tooltip" {
			datacontext = "[MapListOption.GetDiploActionData.GetDiplomaticAction]"
			using = diplomatic_action_tooltip
		}

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {
					blockoverride "name_button_visibility" {
						visible = yes
					}

					blockoverride "name_button_size" {
						size = { 263 40 }
					}

					### Country (copied from diplomatic action option widget)
					blockoverride "name_button_properties" {
						onclick = "[InformationPanelBar.OpenCountryPanel(MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry)]"
						onrightclick = "[RightClickMenuManager.ShowForCountry(MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry)]"

						tooltipwidget = {
							FancyTooltip_Country = {
								datacontext = "[MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry]"
							}
						}
						
						textbox = {
							margin = { 10 0 }
							size = { 250 25 }
							align = nobaseline
							text = "[MapListOption.GetDiploActionData.GetDiplomaticAction.GetSecondCountry.GetName]"
							parentanchor = vcenter
							elide = right
							fontsize_min = 12
						}
					}

					blockoverride "values" {
						datacontext = "[MapListPowerBlocInvitationPanel.GetPowerBloc]"
						datacontext = "[MapListOption.GetDiploActionData.GetCountry]"
						
						### Leverage value
						textbox = {
							raw_text = "[PowerBloc.GetLeverageAdvantage(Country.Self)|0=+]"
							parentanchor = vcenter
							align = hcenter|nobaseline
							size = { 55 25 }
							
							tooltipwidget = {
								RegularTooltip_Leverage = {
									blockoverride "has_power_bloc_context_visibility" {
										visible = yes
									}
								}
							}
						}

						### Rank
						widget = {
							size = { 55 40 }
							alwaystransparent = no
							tooltip = "[Country.GetRankTooltip]"

							rank_badge = {
								parentanchor = center
								size = { 50 50 }
								
								blockoverride "datacontext " { 
									datacontext = "[Country]"
								}

								blockoverride "rank_text" {
									raw_text = "#BOLD [Country.GetCountryScorePositionDesc]"
								}
								blockoverride "rank_text_2" {
									raw_text = "#BOLD [Country.GetCountryScorePositionDesc]"
									visible = no
								}

								blockoverride "animation" {}
							}
						}
			
						### Cohesion value change
						textbox = {
							raw_text = "#v [PowerBloc.PredictCohesionWithMember(Country.Self)|=+]#!"
							parentanchor = vcenter
							align = hcenter|nobaseline
							size = { 55 25 }
						}
						
						### Acceptance
						container = {
							datacontext = "[MapListPowerBlocInvitationPanel.GetDiplomaticAction(Country.Self)]"

							parentanchor = center
							minimumsize = { 55 -1 }
							diplomatic_action_acceptance_icon = {
								blockoverride "parentanchor" {
									parentanchor = center
								}
							}
						}

						### Status is inherited from map_list_panel
					}
				}
			}
		}
	}

	### STRATEGIC REGIONS
	type strategic_regions_map_list_panel = map_list_panel {
		name = "strategic_regions_map_list_panel"

		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "itemvisibility" {
			visible = "[MapListOption.GetStrategicRegionData.GetStrategicRegion.IsLand]"
		}

		blockoverride "headers" {
			sort_button = {
				align = nobaseline
				text = "concept_strategic_region"
				size = { 140 20 }
				onclick = "[MapListPanel.Sort('name')]"
			}

			sort_button = {
				align = nobaseline
				size = { 300 20 }
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "GDP_SHORT"
				size = { 100 20 }
				onclick = "[MapListPanel.Sort('gdp')]"
			}
		}

		blockoverride "values" {
			textbox = {
				margin = { 5 0 }
				size = { 135 25 }
				align = nobaseline
				text = "[MapListOption.GetStrategicRegionData.GetStrategicRegion.GetName]"
				parentanchor = vcenter
				elide = right
			}
			widget = {
				size = { 300 25 }
				parentanchor = vcenter

				overlappingitembox = {
					size = { 300 25 }
					datacontext = "[MapListOption.GetStrategicRegionData.GetStrategicRegion]"
					datamodel = "[StrategicRegion.GetInterests]"

					item = {
						container = {
							tooltip = "INTEREST_MARKER_TOOLTIP"
							using = tooltip_above

							widget = {
								size = { 35 33 }

								tiny_flag = {
									position = { 0 -2 }
									visible = "[Not(Interest.IsActive)]"
									datacontext = "[Interest.GetOwner]"
									blockoverride "tooltip" {}
									parentanchor = center
									alpha = 0.3
								}
								tiny_flag = {
									position = { 0 -2 }
									visible = "[Interest.IsActive]"
									datacontext = "[Interest.GetOwner]"
									blockoverride "tooltip" {}
									parentanchor = center
								}

								widget = {
									size = { 25 4 }
									position = { 0 12 }
									visible = "[Interest.ShouldShowProgressBar]"
									parentanchor = center

									bad_progressbar_horizontal = {
										visible = "[Interest.IsActive]"
										size = { 100% 100% }
										blockoverride "values" {
											min = 0
											max = 1
											value = "[Interest.GetProgress]"
										}
									}

									default_progressbar_horizontal = {
										visible = "[Not(Interest.IsActive)]"
										size = { 100% 100% }
										blockoverride "values" {
											min = 0
											max = 1
											value = "[Interest.GetProgress]"
										}
									}
								}
							}
						}
					}
				}
			}

			textbox = {
				margin = { 5 0 }
				size = { 95 25 }
				align = right|nobaseline
				raw_text = "@money![MapListOption.GetStrategicRegionData.GetStrategicRegion.GetTotalGDP|Dv]"
				parentanchor = vcenter
				elide = right
			}
		}

		blockoverride "interaction" {
			onmousehierarchyenter = "[AccessHighlightManager.HighlightStrategicRegion(MapListOption.GetStrategicRegionData.GetStrategicRegion)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
		}
	}

	### INTEREST GROUPS
	type interest_groups_map_list_panel = map_list_panel {
		name = "interest_groups_map_list_panel"

		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "headers" {
			sort_button = {
				align = nobaseline
				text = "concept_interest_group"
				size = { 420 20 }
				onclick = "[MapListPanel.Sort('name')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "concept_clout"
				size = { 130 20 }
				onclick = "[MapListPanel.Sort('clout')]"
			}
		}

		blockoverride "values" {
			textbox = {
				margin = { 5 0 }
				size = { 400 25 }
				align = nobaseline
				text = "[MapListOption.GetInterestGroupData.GetInterestGroup.GetName]"
				parentanchor = vcenter
				elide = right
			}

			textbox = {
				datacontext = "[MapListOption.GetInterestGroupData.GetInterestGroup]"
				margin = { 5 0 }
				size = { 120 25 }
				align = right|nobaseline
				text = "[InterestGroup.GetClout|1%v]"
				parentanchor = vcenter
				elide = right
				using = clout_tooltip_with_graph
			}
		}

		blockoverride "interaction" {
			onclick = "[InformationPanelBar.OpenInterestGroupPanel(MapListOption.AccessInterestGroupData.AccessInterestGroup)]"
			onrightclick = "[RightClickMenuManager.ShowForIG(MapListOption.AccessInterestGroupData.AccessInterestGroup)]"
		}
	}

	type countries_map_list_panel = countries_map_list_panel_full {
		name = "countries_map_list_panel"
	}

	type countries_ongoing_diplomatic_play_map_list_panel = countries_map_list_panel_full {
		name = "countries_ongoing_diplomatic_play_map_list_panel"
	}

	### COUNTRY ATTITUDE
	type country_attitude_map_list_panel = country_map_list_one_value {
		name = "country_attitude_map_list_panel"

		blockoverride "shown_on_map_header" {
			text = "concept_attitude"
			onclick = "[MapListPanel.Sort('attitude')]"
		}
		blockoverride "shown_on_map_value" {
			visible = "[Not(ObjectsEqual(Country.Self, GetPlayer.Self))]"
			text = "[Country.GetAttitudeTowards(GetPlayer).GetName]"
			tooltip = "[Country.GetAttitudeTowards(GetPlayer).GetTooltip]"
		}

		blockoverride "button_color" {
			color = "[Country.GetAttitudeTowards( GetPlayer.Self ).GetColor]"
		}
	}

	### COUNTRY RELATIONS
	type country_relations_map_list_panel = country_map_list_one_value {
		name = "country_relations_map_list_panel"

		blockoverride "shown_on_map_header" {
			text = "concept_relations"
			onclick = "[MapListPanel.Sort('relations')]"
		}
		blockoverride "shown_on_map_value" {
			visible = "[Not(ObjectsEqual(Country.Self, GetPlayer.Self))]"
			tooltip = "[GetPlayer.GetRelationsTooltip( Country.Self )]"
			raw_text = "[Country.GetRelationsWithDesc( GetPlayer )] ([Country.GetRelationsWith(GetPlayer)|+=])"
		}

		blockoverride "button_color" {
			color = "[Country.GetRelationsColor( GetPlayer.Self )]"
		}
	}

	### COUNTRY INFAMY
	type country_infamy_map_list_panel = country_map_list_one_value {
		name = "country_infamy_map_list_panel"

		blockoverride "itemvisibility" {
			visible = "[Not(Country.IsColonizable)]"
		}

		blockoverride "shown_on_map_header" {
			text = "concept_infamy"
			onclick = "[MapListPanel.Sort('infamy')]"
		}
		blockoverride "shown_on_map_value" {
			raw_text = "[Country.GetInfamyLabel] ([Country.GetInfamy|-1])"
			tooltip = "[Country.GetInfamyDesc]"
		}
	}

	type country_mass_migration_pull_list_panel = country_map_list_one_value {
		name = "country_mass_migration_pull_list_panel"

		blockoverride "itemvisibility" {
			visible = "[Not(Country.IsColonizable)]"
		}

		blockoverride "shown_on_map_header" {
			text = "concept_mass_migration_pull"
			onclick = "[MapListPanel.Sort('country_migration_pull')]"
		}

		blockoverride "shown_on_map_value" {
			raw_text = "#v [Country.GetLimitedMassMigrationCountryAttraction|1]#!"
			tooltip = "[Country.GetMassMigrationAttractionDesc]"
		}
	}

	type countries_military_map_list_panel = map_list_panel {
		name = "countries_military_map_list_panel"

		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "button_color" {
			color = "[Country.GetDiplomaticStatusColor( GetPlayer.Self )]"
		}

		blockoverride "headers" {
			sort_button = {
				size = { 55 30 }
				onclick = "[MapListPanel.Sort('rank')]"

				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_rank.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}

				tooltip = "SORT_BY_RANK"
			}
			sort_button = {
				align = nobaseline
				text = "COUNTRY"
				size = { 240 20 }
				onclick = "[MapListPanel.Sort('name')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 120 20 }
				text = "BATTALIONS"
				onclick = "[MapListPanel.Sort('army')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 125 20 }
				text = "FLOTILLAS"
				onclick = "[MapListPanel.Sort('navy')]"
			}
		}

		blockoverride "values" {
			datacontext = "[MapListOption.GetCountryData.GetCountry]"
			widget = {
				size = { 50 40 }
				parentanchor = left|vcenter
				alwaystransparent = no
				tooltip = "[Country.GetRankTooltip]"

				rank_badge = {
					size = { 50 50 }
					parentanchor = right|vcenter
					position = { -2 0 }
					
					blockoverride "datacontext " {
						datacontext = "[MapListOption.GetCountryData.GetCountry]" 
					}

					blockoverride "rank_text" {
						raw_text = "#BOLD [Country.GetCountryScorePositionDesc]"
					}
					blockoverride "rank_text_2" {
						raw_text = "#BOLD [Country.GetCountryScorePositionDesc]"
						visible = no
					}
				}
			}
			
			textbox = {
				margin = { 5 0 }
				size = { 240 25 }
				align = nobaseline
				text = "[Country.GetName]"
				parentanchor = vcenter
				elide = right
			}

			textbox = {
				margin = { 5 0 }
				size = { 120 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				raw_text = "#variable @battalions! [Country.GetBattalions|0]#! "
				tooltip = PANEL_MILITARY_ARMY_CURRENT_BATTALIONS_TOOLTIP
			}
			textbox = {
				margin = { 5 0 }
				size = { 120 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				raw_text = "#variable @flotillas! [Country.GetWarships|0]#!"
				tooltip = PANEL_MILITARY_NAVY_CURRENT_FLOTILLAS_TOOLTIP
			}
		}

		blockoverride "interaction" {
			datacontext = "[MapListOption.GetCountryData.GetCountry]"
			onclick = "[InformationPanelBar.OpenCountryPanel(Country.Self)]"
			onrightclick = "[RightClickMenuManager.ShowForCountry(Country.AccessSelf)]"
			onmousehierarchyenter = "[AccessHighlightManager.HighlightCountry(Country.Self)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
		}
	}

	### TRADE ROUTES
	type trade_route_map_list_panel = map_list_panel {
		name = "trade_route_map_list_panel"

		blockoverride "headers" {
			sort_button = {
				align = hcenter|nobaseline
				text = "TRADE_ROUTE_LIST_PANEL_MARKET_HEADER"
				tooltip = "TRADE_ROUTE_LIST_PANEL_MARKET_HEADER_TOOLTIP"
				size = { 180 20 }
				onclick = "[MapListPanel.Sort('market')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "TRADE_ROUTE_LIST_PANEL_LEVEL_HEADER"
				tooltip = "TRADE_ROUTE_LIST_PANEL_LEVEL_HEADER_TOOLTIP"
				size = { 60 20 }
				onclick = "[MapListPanel.Sort('level')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "TRADE_ROUTE_LIST_PANEL_QUANTITY_HEADER"
				tooltip = "TRADE_ROUTE_LIST_PANEL_QUANTITY_HEADER_TOOLTIP"
				size = { 85 20 }
				onclick = "[MapListPanel.Sort('quantity')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				text = "TRADE_ROUTE_LIST_PANEL_CONVOYS_HEADER"
				tooltip = "TRADE_ROUTE_LIST_PANEL_CONVOYS_HEADER_TOOLTIP"
				size = { 50 20 }
				onclick = "[MapListPanel.Sort('convoys')]"
			}			
			sort_button = {
				align = hcenter|nobaseline
				text = "TRADE_ROUTE_LIST_PANEL_VALUE_HEADER"
				tooltip = "TRADE_ROUTE_LIST_PANEL_VALUE_HEADER_TOOLTIP"
				size = { 110 20 }
				onclick = "[MapListPanel.Sort('value')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				tooltip = "TRADE_ROUTE_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {
					blockoverride "name_button_visibility" {
						visible = yes
					}

					blockoverride "name_button_size" {
						size = { 180 40 }
					}

					blockoverride "name_button_properties" {
						datacontext = "[MapListOption.AccessTradeRouteData.AccessMarket]"
						onclick = "[InformationPanelBar.OpenMarketPanel(Market.AccessSelf)]"
						onrightclick = "[RightClickMenuManager.ShowForMarket(Market.AccessSelf)]"

						tooltipwidget = {
							FancyTooltip_Market = {
								datacontext = "[MapListOption.GetTradeRouteData.GetMarket]"
							}
						}
						
						textbox = {
							margin = { 10 0 }
							size = { 175 25 }
							align = nobaseline
							text = "[MapListOption.GetTradeRouteData.GetMarket.GetNameNoFormatting]"
							parentanchor = vcenter
							elide = right
							fontsize_min = 12
						}
					}

					blockoverride "values" {
						textbox = {
							margin = { 5 0 }
							size = { 60 25 }
							align = hcenter|nobaseline
							text = "[MapListOption.GetTradeRouteData.GetLevel|v]"
							tooltip = "[MapListOption.GetTooltip]"
							parentanchor = vcenter
							elide = right
						}
						textbox = {
							margin = { 5 0 }
							size = { 85 25 }
							align = hcenter|nobaseline
							text = "[MapListOption.GetTradeRouteData.GetTradedQuantity|0v]"
							tooltip = "[MapListOption.GetTooltip]"
							parentanchor = vcenter
							elide = right
						}	
						textbox = {
							margin = { 5 0 }
							size = { 50 25 }
							align = hcenter|nobaseline
							text = "[MapListOption.GetTradeRouteData.GetConvoyCost|v]"
							tooltip = "[MapListOption.GetTooltip]"
							parentanchor = vcenter
							elide = right
						}				
						textbox = {
							margin = { 10 0 }
							size = { 110 25 }
							align = hcenter|nobaseline
							raw_text = "@money![MapListOption.GetTradeRouteData.GetProductivity|D+]"
							tooltip = "[MapListOption.GetTooltip]"
							parentanchor = vcenter
							elide = right
						}		
					}
				}
			}
		}
	}

	### STATE
	type state_map_list_panel = map_list_panel {
		name = "state_map_list_panel"

		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "headers" {
			sort_button = {
				align = nobaseline
				text = "STATE"
				size = { 240 20 }
				onclick = "[MapListPanel.Sort('name')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 100 20 }
				text = "POPULATION"
				onclick = "[MapListPanel.Sort('population')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 100 20 }
				text = "SOL_SHORT_TEXT"
				onclick = "[MapListPanel.Sort('standard_of_living')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 100 20 }
				text = "GDP_SHORT"
				onclick = "[MapListPanel.Sort('gdp_contribution')]"
			}
		}

		blockoverride "values" {
			textbox = {
				margin = { 5 0 }
				size = { 240 25 }
				align = nobaseline
				text = "[MapListOption.GetStateData.GetState.GetOwner.GetFlagTextIcon]  [MapListOption.GetStateData.GetState.GetName]"
				parentanchor = vcenter
				elide = right
			}

			textbox = {
				datacontext = "[MapListOption.GetStateData.GetState]"
				margin = { 5 0 }
				size = { 90 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				text = "[State.GetPopulationSize|Kv]"
				tooltip = "TOOLTIP_STATE_POPULATION"
			}

			textbox = {
				datacontext = "[MapListOption.GetStateData.GetState]"
				margin = { 5 0 }
				size = { 100 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				tooltip = "NUM_SOL"
				text = "[State.GetAverageStandardOfLivingAll|v1]"
			}

			textbox = {
				datacontext = "[MapListOption.GetStateData.GetState]"
				margin = { 5 0 }
				size = { 100 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				raw_text = "@money![State.GetGDPContribution|Dv]"
			}
		}

		blockoverride "interaction" {
			datacontext = "[MapListOption.AccessStateData.AccessState]"
			onclick = "[InformationPanelBar.OpenStatePanel(State.AccessSelf)]"
			onrightclick = "[RightClickMenuManager.ShowForState(State.AccessSelf)]"
			onmousehierarchyenter = "[AccessHighlightManager.HighlightState(State.Self)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
		}
	}

	# STATE POPULATION
	type state_population_map_list_panel = state_map_list_one_value {
		name = "state_population_map_list_panel"

		blockoverride "shown_on_map_header" {
			text = "POPULATION"
			onclick = "[MapListPanel.Sort('population')]"
		}
		blockoverride "shown_on_map_value" {
			text = "[State.GetPopulationSize|Kv]"
			tooltip = "TOOLTIP_STATE_POPULATION"
		}
	}

	# STATE LITERACY
	type state_literacy_map_list_panel = state_map_list_one_value {
		name = "state_literacy_map_list_panel"

		blockoverride "shown_on_map_header" {
			text = "concept_literacy"
			onclick = "[MapListPanel.Sort('literacy')]"
		}
		blockoverride "shown_on_map_value" {
			text = "[State.GetLiteracy|%1v]"
			tooltip = "STATE_LITERACY"
		}
	}

	# STATE POLLUTION
	type state_pollution_map_list_panel = state_map_list_one_value {
		name = "state_pollution_map_list_panel"

		blockoverride "shown_on_map_header" {
			text = "concept_pollution_impact"
			onclick = "[MapListPanel.Sort('pollution')]"
		}
		blockoverride "shown_on_map_value" {
			text = "[State.GetStateRegion.GetPollutionImpact|%R1]"
			tooltip = "STATE_POLLUTION"
		}
	}

	# STATE PRODUCTION
	type state_production_map_list_panel = state_map_list_one_value {
		name = "state_production_map_list_panel"

		blockoverride "shown_on_map_header" {
			text = "GDP_CONTRIBUTION"
			onclick = "[MapListPanel.Sort('gdp_contribution')]"
		}
		blockoverride "shown_on_map_value" {
			raw_text = "@money![State.GetGDPContribution|Dv]"
			tooltip = "CURRENT_GDP_STATE"
		}
	}

	# STATE GDP
	type state_gdp_map_list_panel = state_map_list_one_value {
		name = "state_gdp_map_list_panel"

		blockoverride "shown_on_map_header" {
			text = "GDP_CONTRIBUTION"
			onclick = "[MapListPanel.Sort('gdp_contribution')]"
		}
		blockoverride "shown_on_map_value" {
			raw_text = "@money![State.GetGDPContribution|Dv]"
			tooltip = "CURRENT_GDP_STATE"
		}
	}

	# STATE GDP (NATIONALLY)
	type state_gdp_nationally_map_list_panel = state_map_list_one_value {
		name = "state_gdp_nationally_map_list_panel"

		blockoverride "itemvisibility" {
			visible = "[ObjectsEqual(MapListOption.GetStateData.GetState.GetOwner, GetPlayer.Self)]"
		}

		blockoverride "shown_on_map_header" {
			text = "GDP_CONTRIBUTION"
			onclick = "[MapListPanel.Sort('gdp_contribution')]"
		}
		blockoverride "shown_on_map_value" {
			raw_text = "@money![State.GetGDPContribution|Dv]"
			tooltip = "CURRENT_GDP_STATE"
		}
	}

	# STATE GDP OWNERSHIP RATIO
	type state_gdp_ownership_ratio_map_list_panel = state_map_list_one_value {
		name = "state_gdp_ownership_ratio_map_list_panel"

		blockoverride "itemvisibility" {
			visible = "[Or(ObjectsEqual(MapListOption.GetStateData.GetState.GetOwner,GetPlayer.Self), GreaterThan_CFixedPoint(MapListOption.GetStateData.GetState.GetGdpRatioOwnedBy(GetPlayer.Self),'(CFixedPoint)0'))]"
		}

		blockoverride "shown_on_map_header" {
			text = "GDP_OWNERSHIP"
			onclick = "[MapListPanel.Sort('gdp_ownership')]"
		}
		blockoverride "shown_on_map_value" {
			raw_text = "@money![State.GetGdpRatioOwnedBy(GetPlayer.Self)|%0v]"
			tooltip = "[State.GetGdpRatioOwnedByDesc(GetPlayer.Self)]"
		}
	}

	# STATE STANDARD OF LIVING
	type state_standard_of_living_map_list_panel = state_map_list_one_value {
		name = "state_standard_of_living_map_list_panel"

		blockoverride "shown_on_map_header" {
			text = "concept_sol"
			onclick = "[MapListPanel.Sort('standard_of_living')]"
		}
		blockoverride "shown_on_map_value" {
			raw_text = "[LabelingHelper.GetLabelForStandardOfLivingCFixedPoint(State.GetAverageStandardOfLivingAll)|v] ([State.GetAverageStandardOfLivingAll|v1])"
			tooltip = "NUM_SOL"
		}
	}
	
	# STATE RADICALS
	type state_radicals_map_list_panel = state_map_list_one_value {
		name = "state_radicals_map_list_panel"

		blockoverride "itemvisibility" {
			visible = "[ObjectsEqual(MapListOption.GetStateData.GetState.GetOwner, GetPlayer.Self)]"
		}
		
		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}
		
		blockoverride "shown_on_map_header" {
			text = "concept_radicals"
			onclick = "[MapListPanel.Sort('radicals')]"
		}
		
		blockoverride "shown_on_map_value" {
			text = "[State.GetNumRadicals|-d]"
		}
	}

	# STATE LOYALISTS
	type state_loyalists_map_list_panel = state_map_list_one_value {
		name = "state_loyalists_map_list_panel"

		blockoverride "itemvisibility" {
			visible = "[ObjectsEqual(MapListOption.GetStateData.GetState.GetOwner, GetPlayer.Self)]"
		}
		
		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}
		
		blockoverride "shown_on_map_header" {
			text = "concept_loyalists"
			onclick = "[MapListPanel.Sort('loyalists')]"
		}
		
		blockoverride "shown_on_map_value" {
			text = "[State.GetNumLoyalists|+d]"
		}
	}

	# STATE MIGRATION PULL
	type state_migration_pull_list_panel = state_map_list_one_value {
		name = "state_migration_pull_list_panel"

		blockoverride "itemvisibility" {
			visible = "[ObjectsEqual(MapListOption.GetStateData.GetState.GetOwner, GetPlayer.Self)]"
		}

		blockoverride "shown_on_map_header" {
			text = "concept_migration_pull"
			onclick = "[MapListPanel.Sort('migration_pull')]"
		}
		blockoverride "shown_on_map_value" {
			raw_text = "#v [State.GetMigrationLabel]#!"
			tooltip = "MIGRATION_PULL_DESC"
		}
	}

	type state_mass_migration_pull_list_panel = state_map_list_one_value {
		name = "state_mass_migration_pull_list_panel"

		blockoverride "itemvisibility" {
			visible = "[State.IsEligibleForMassMigration]"
		}

		blockoverride "shown_on_map_header" {
			text = "concept_migration_pull"
			onclick = "[MapListPanel.Sort('migration_pull')]"
		}
		blockoverride "shown_on_map_value" {
			raw_text = "#v [State.GetMigrationLabel]#!"
			tooltip = "MIGRATION_PULL_DESC"
		}
	}

	# STATE MIGRATION
	type state_migration_list_panel = state_map_list_one_value {
		name = "state_migration_list_panel"

		blockoverride "shown_on_map_header" {
			text = "concept_weekly_migration"
			onclick = "[MapListPanel.Sort('migration')]"
		}
		blockoverride "shown_on_map_value" {
			raw_text = "#v [State.GetWeeklyPopNetMigration|D=+]#!"
			tooltip = "TOOLTIP_STATE_MIGRATION"
		}
	}

	type state_culture_map_list_panel = map_list_panel {
		name = "state_culture_map_list_panel"

		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "headers" {
			sort_button = {
				align = nobaseline
				text = "STATE"
				size = { 240 20 }
				onclick = "[MapListPanel.Sort('name')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 100 20 }
				text = "POPULATION"
				onclick = "[MapListPanel.Sort('population')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 100 20 }
				text = "SOL_SHORT_TEXT"
				onclick = "[MapListPanel.Sort('standard_of_living')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 100 20 }
				text = "GDP_SHORT"
				onclick = "[MapListPanel.Sort('gdp_contribution')]"
			}
		}

		blockoverride "values" {
			textbox = {
				margin = { 5 0 }
				size = { 240 25 }
				align = nobaseline
				text = "[MapListOption.GetStateData.GetState.GetOwner.GetFlagTextIcon]  [MapListOption.GetStateData.GetState.GetName]"
				parentanchor = vcenter
				elide = right
			}

			textbox = {
				datacontext = "[MapListOption.GetStateData.GetState]"
				margin = { 5 0 }
				size = { 90 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				text = "[State.GetPopulationSize|Kv]"
				tooltip = "TOOLTIP_STATE_POPULATION"
			}

			textbox = {
				datacontext = "[MapListOption.GetStateData.GetState]"
				margin = { 5 0 }
				size = { 100 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				tooltip = "NUM_SOL"
				text = "[State.GetAverageStandardOfLivingAll|v1]"
			}

			textbox = {
				datacontext = "[MapListOption.GetStateData.GetState]"
				margin = { 5 0 }
				size = { 100 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				raw_text = "@money![State.GetGDPContribution|Dv]"
			}
		}

		blockoverride "interaction" {
			datacontext = "[MapListOption.AccessStateData.AccessState]"
			onclick = "[InformationPanelBar.OpenStatePanel(State.AccessSelf)]"
			onrightclick = "[RightClickMenuManager.ShowForState(State.AccessSelf)]"
			onmousehierarchyenter = "[AccessHighlightManager.HighlightState(State.Self)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
		}
	}

	type state_religion_map_list_panel = map_list_panel {
		name = "state_religion_map_list_panel"
	
		blockoverride "header_close_button" {
			onclick = "[MapListPanelManager.CloseCurrentPanel]"
		}

		blockoverride "headers" {
			sort_button = {
				align = nobaseline
				text = "STATE"
				size = { 240 20 }
				onclick = "[MapListPanel.Sort('name')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 100 20 }
				text = "POPULATION"
				onclick = "[MapListPanel.Sort('population')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 100 20 }
				text = "SOL_SHORT_TEXT"
				onclick = "[MapListPanel.Sort('standard_of_living')]"
			}
			sort_button = {
				align = hcenter|nobaseline
				size = { 100 20 }
				text = "GDP_SHORT"
				onclick = "[MapListPanel.Sort('gdp_contribution')]"
			}
		}

		blockoverride "values" {
			textbox = {
				margin = { 5 0 }
				size = { 240 25 }
				align = nobaseline
				text = "[MapListOption.GetStateData.GetState.GetOwner.GetFlagTextIcon]  [MapListOption.GetStateData.GetState.GetName]"
				parentanchor = vcenter
				elide = right
			}

			textbox = {
				datacontext = "[MapListOption.GetStateData.GetState]"
				margin = { 5 0 }
				size = { 90 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				text = "[State.GetPopulationSize|Kv]"
				tooltip = "TOOLTIP_STATE_POPULATION"
			}

			textbox = {
				datacontext = "[MapListOption.GetStateData.GetState]"
				margin = { 5 0 }
				size = { 100 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				tooltip = "NUM_SOL"
				text = "[State.GetAverageStandardOfLivingAll|v1]"
			}

			textbox = {
				datacontext = "[MapListOption.GetStateData.GetState]"
				margin = { 5 0 }
				size = { 100 25 }
				align = right|nobaseline
				parentanchor = vcenter
				elide = right
				raw_text = "@money![State.GetGDPContribution|Dv]"
			}
		}

		blockoverride "interaction" {
			datacontext = "[MapListOption.AccessStateData.AccessState]"
			onclick = "[InformationPanelBar.OpenStatePanel(State.AccessSelf)]"
			onrightclick = "[RightClickMenuManager.ShowForState(State.AccessSelf)]"
			onmousehierarchyenter = "[AccessHighlightManager.HighlightState(State.Self)]"
			onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
		}
	}

	type activate_conscription_center_map_list_panel = map_list_panel {
		name = "activate_conscription_center_map_list_panel"

		blockoverride "headers" {

			sort_button = {
				align = nobaseline
				margin = { 20 0 }
				text = "ACTIVATE_CONSCRIPTION_CENTER_MAP_LIST_PANEL_STATE_HEADER"
				tooltip = "ACTIVATE_CONSCRIPTION_CENTER_MAP_LIST_PANEL_STATE_HEADER_TOOLTIP"
				size = { 160 20 }
				onclick = "[MapListPanel.Sort('state')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				tooltip = "MAP_INTERACTION_ADD_CONSCRIPTS_LIMIT_HEADER_TOOLTIP"
				size = { 90 20 }
				onclick = "[MapListPanel.Sort('size')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_size.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "[concept_hq]"
				size = { 240 20 }
				onclick = "[MapListPanel.Sort('hq')]"
			}


			sort_button = {
				align = hcenter|nobaseline
				tooltip = "BUILDING_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {
					blockoverride "name_button_visibility" {
						visible = yes
					}

					blockoverride "name_button_size" {
						size = { 160 40 }
					}

					blockoverride "name_button_properties" {

						datacontext = "[MapListOption.GetActivateConscriptionCenterData.GetState]"

						onmousehierarchyenter = "[AccessHighlightManager.HighlightState(State.Self)]"
						onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
						onclick = "[InformationPanelBar.OpenStatePanel(State.AccessSelf)]"
						onrightclick = "[RightClickMenuManager.ShowForState(State.AccessSelf)]"

						tooltipwidget = {
							FancyTooltip_State = {}
						}

						textbox = {
							visible = "[Not(And(State.IsUnincorporated, Not(State.IsIncorporating)))]"
							margin = { 10 0 }
							size = { 160 25 }
							align = nobaseline
							text = "[State.GetNameNoFormatting]"
							parentanchor = vcenter
							elide = right
							fontsize_min = 12
						}

						textbox = {
							visible = "[And(State.IsUnincorporated, Not(State.IsIncorporating))]"
							margin = { 10 0 }
							size = { 135 25 }
							align = nobaseline
							text = "[State.GetNameNoFormatting]"
							parentanchor = vcenter
							elide = right
							fontsize_min = 12
						}
						
						icon = {
							visible = "[And(State.IsUnincorporated, Not(State.IsIncorporating))]"
							parentanchor = right|vcenter
							position = { -10 0 }
							size = { 25 25 }
							texture = "gfx/interface/icons/state_status_icons/unincorporated_state.dds"
						}
					}

					blockoverride "values" {

						textbox = {
							datacontext = "[MapListOption.GetActivateConscriptionCenterData.GetState]"
							margin = { 5 0 }
							size = { 90 25 }
							align = hcenter|nobaseline
							text = "MAP_LIST_STATE_CONSCRIPTION_EXPECTED"
							parentanchor = vcenter
							elide = right
							using = tooltip_above
							alpha = "[TransparentIfFalse( GreaterThan_int32(MapListOption.GetActivateConscriptionCenterData.GetNumExpectedConscripts, '(int32)0') )]"
							fontsize_min = 12
						}
	
						textbox = {
							margin = { 5 0 }
							margin_right = 10
							size = { 240 25 }
							align = hcenter|nobaseline
							raw_text = "#v [MapListOption.GetActivateConscriptionCenterData.GetHQ.GetStrategicRegion.GetName]#!"
							parentanchor = vcenter
							elide = right
						}
					}
				}
			}
		}
	}

	# FRONT
	type front_map_list_panel = map_list_panel {
		name = "front_map_list_panel"

		blockoverride "headers" {
			sort_button = {
				align = hcenter|nobaseline
				text = "concept_front"
				size = { 255 20 }
				onclick = "[MapListPanel.Sort('front')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "FRONT_MAP_LIST_PANEL_ADVANTAGE"
				tooltip = "FRONT_MAP_LIST_PANEL_ADVANTAGE_TOOLTIP"
				size = { 115 20 }
				onclick = "[MapListPanel.Sort('advantage')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				text = "FRONT_MAP_LIST_PANEL_UNITS"
				tooltip = "FRONT_MAP_LIST_PANEL_UNITS_TOOLTIP"
				size = { 115 20 }
				onclick = "[MapListPanel.Sort('units')]"
			}

			sort_button = {
				align = hcenter|nobaseline
				tooltip = "DEFAULT_MAP_LIST_PANEL_STATUS_HEADER_TOOLTIP"
				size = { 55 20 }
				onclick = "[MapListPanel.Sort('status')]"
				icon = {
					texture = "gfx/interface/buttons/sort_button_icons/sort_icon_status.dds"
					size = { 25 25 }
					parentanchor = center
					alwaystransparent = yes
				}
			}
		}

		blockoverride "item" {
			item = {
				map_list_panel_item_interaction = {
					blockoverride "name_button_visibility" {
						visible = yes
					}

					blockoverride "name_button_size" {
						size = { 255 40 }
					}

					blockoverride "name_button_properties" {
						datacontext = "[MapListOption.GetAdvanceFrontData.GetFront]"

						onmousehierarchyenter = "[AccessHighlightManager.HighlightFront(MapListOption.GetAdvanceFrontData.GetFront)]"
						onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"

						onclick = "[InformationPanelBar.OpenFrontPanel(Front.AccessSelf)]"

						textbox = {
							margin = { 10 0 }
							size = { 250 25 }
							align = nobaseline
							text = "[Front.GetName]"
							parentanchor = vcenter
							elide = right
							fontsize_min = 14
						}
					}

					blockoverride "values" {
						datacontext = "[MapListOption.GetAdvanceFrontData.GetFront]"

						textbox = {
							visible = "[Not(StringIsEmpty( Front.GetPlayerAdvantageDesc ))]"
							tooltip = "[Front.GetPlayerAdvantageDesc]"
							raw_text = "#v [Front.GetPlayerAdvantageRaw|+]#!"
							size = { 115 25 }
							align = hcenter|nobaseline
							elide = right
							parentanchor = center
						}

						textbox = {
							margin = { 5 0 }
							size = { 115 25 }
							align = hcenter|nobaseline
							raw_text = "@battalions! [Front.GetNumUnits( GetPlayer.Self )|v]"
							parentanchor = vcenter
							elide = right
							using = tooltip_above
						}
					}

					blockoverride "interaction" {
						datacontext = "[MapListOption.GetAdvanceFrontData.GetFront]"
						enabled = "[MapListOption.CanClick]"
						onclick = "[MapListOption.OnClick]"
						onmousehierarchyenter = "[AccessHighlightManager.HighlightFront(MapListOption.GetAdvanceFrontData.GetFront)]"
						onmousehierarchyleave = "[AccessHighlightManager.RemoveHighlight]"
					}
				}
			}
		}
	}
}

types building_info {
	type productivity_or_other_information = container {
		block "productivity_info_datacontext" {}

		# Productivity
		textbox = {
			visible = "[Not(ObjectsEqual(Building.GetBuildingType, GetBuildingType('building_government_administration').Self))]"
			raw_text = "#v @money![Building.GetBuildingType.GetExpansionProductivityImpact(Building.Self, Building.GetState)|1+]#!"
			tooltip = "[Building.GetBuildingType.GetExpansionProductivityImpactDesc(Building.Self, Building.GetState)]"

			elide = right
			fontsize_min = 12

			block "productivity_info_text_style" {}
		}

		# Tax Capacity (Government Administration)
		textbox = {
			visible = "[ObjectsEqual(Building.GetBuildingType, GetBuildingType('building_government_administration').Self)]"
			raw_text = "[State.CalcTaxCapacityBalance|0+=]"
			tooltip = "STATE_TAX_CAPACITY_DESC"

			elide = right
			fontsize_min = 12

			block "productivity_info_text_style" {}
		}
	}
}
