market_gui_market_currency_list = {
	saved_scopes = { list_order list_filter }
	effect = {
		clear_global_variable_list = gui_market_currency_list
		if = { 
			limit = { 
				exists = scope:list_filter 
			} 
			market = {
				if = { 
					limit = { 
						exists = var:gui_filter 
					} 
					if = { 
						limit = { 
							var:gui_filter = scope:list_filter }
							set_variable = { 
								name = gui_filter 
								value = 0 
							} 
						}
					else = { 
						set_variable = { 
							name = gui_filter 
							value = scope:list_filter 
						} 
					}
				} 
				else = { 
					set_variable = { 
						name = gui_filter 
						value = scope:list_filter 
					} 
				}
			} 
		}
		if = { 
			limit = { 
				exists = scope:list_order 
			} 
			market = {
				if = { 
					limit = { 
						exists = var:gui_order 
					} 
					if = {
						limit = { 
							var:gui_order = scope:list_order 
						} 
						set_variable = { 
							name = gui_order value = { 
								subtract = scope:list_order 
							} 
						} 
					}
					else = { 
						set_variable = { 
							name = gui_order 
							value = scope:list_order 
						} 
					}
				} 
				else = { 
					set_variable = { 
						name = gui_order 
						value = scope:list_order 
					} 
				}
			} 
		}

		ordered_market_goods = {
			limit = {
				market_goods_is_staple = yes
				# OR = {
				# 	AND = {  }
				# 	AND = {  market_goods_is_industrial = yes }
				# }
			}

			min = 0
			add_to_global_variable_list = { name = gui_market_currency_list target = THIS }
		}
	}
}
market_gui_market_financial_product_list = {
	saved_scopes = { list_order list_filter }
	effect = {
		clear_global_variable_list = gui_market_financial_product_list
		if = { 
			limit = { 
				exists = scope:list_filter 
			} 
			market = {
				if = { 
					limit = { 
						exists = var:gui_filter 
					} 
					if = { 
						limit = { 
							var:gui_filter = scope:list_filter }
							set_variable = { 
								name = gui_filter 
								value = 0 
							} 
						}
					else = { 
						set_variable = { 
							name = gui_filter 
							value = scope:list_filter 
						} 
					}
				} 
				else = { 
					set_variable = { 
						name = gui_filter 
						value = scope:list_filter 
					} 
				}
			} 
		}
		if = { 
			limit = { 
				exists = scope:list_order 
			} 
			market = {
				if = { 
					limit = { 
						exists = var:gui_order 
					} 
					if = {
						limit = { 
							var:gui_order = scope:list_order 
						} 
						set_variable = { 
							name = gui_order value = { 
								subtract = scope:list_order 
							} 
						} 
					}
					else = { 
						set_variable = { 
							name = gui_order 
							value = scope:list_order 
						} 
					}
				} 
				else = { 
					set_variable = { 
						name = gui_order 
						value = scope:list_order 
					} 
				}
			} 
		}

		ordered_market_goods = {
			limit = {
				market_goods_is_financial_product = yes
			}

			min = 0
			add_to_global_variable_list = { name = gui_market_financial_product_list target = THIS }
		}
	}
}